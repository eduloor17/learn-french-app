<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>French Companion App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-practice: #4f46e5;
            --color-practice-text: #ffffff;
            --color-conversations: #10b981;
            --color-conversations-text: #ffffff;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
        }
        .flip-container {
            perspective: 1000px;
            cursor: pointer;
        }
        .lesson-card {
            min-height: 25rem;
        }
        .flip-container:hover .flipper, .flip-container.flipped .flipper {
            transform: rotateY(180deg);
        }
        .flipper {
            transition: 0.6s;
            transform-style: preserve-3d;
            position: relative;
        }
        .front, .back {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 1.5rem;
            padding: 1.5rem;
            box-sizing: border-box;
        }
        .front {
            z-index: 2;
            transform: rotateY(0deg);
            background-color: #f0f4ff;
            color: #1e3a8a;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .back {
            transform: rotateY(180deg);
            background-color: #6366f1;
            color: #ffffff;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .phonetic {
            font-family: monospace;
            opacity: 0.7;
            margin-bottom: 1rem;
        }
        .listen-btn {
            background-color: #c7d2fe;
            color: #4f46e5;
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: background-color 0.15s;
        }
        .listen-btn:hover {
            background-color: #a5b4fc;
        }
        .action-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 1rem;
            font-weight: 700;
            color: white;
            transition: all 0.15s ease-in-out;
            background-color: #4f46e5;
            box-shadow: 0 4px #4338ca;
        }
        .action-btn:hover {
            transform: translateY(1px);
            box-shadow: 0 3px #4338ca;
        }
        .action-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }
        /* Custom style for the recording button when active */
        #record-btn-flashcard.recording, #record-btn.recording {
            background-color: #ef4444; /* Red */
            box-shadow: 0 4px #dc2626; /* Darker Red Shadow */
            animation: pulse-red 1.5s infinite;
        }
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        
    </style>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // setLogLevel('Debug'); // Enable Firestore logging

        // --- GLOBAL STATE ---
        window.currentView = 'flashcard'; // 'flashcard', 'conversations', or 'wordGuess'
        window.currentMode = 'practice'; // 'practice' (for flashcards), 'review' (for flashcards), 'conversations', 'guess' (for word game)
        window.currentLessonIndex = 0;
        window.currentCardIndex = 0;
        window.activeCardList = [];
        window.isFlipped = false;
        window.currentProgress = {}; // Stores completion status { 'animals': true, ... }
        window.isRecording = false;
        window.mediaRecorder = null;
        window.audioChunks = [];
        window.recordedAudioUrl = null;
        window.isListening = false;
        window.currentConversationIndex = 0;
        window.guessWordState = {
            currentWord: '',
            scrambledWord: '',
            userGuess: '',
            message: '',
            score: 0
        };


        // --- FIREBASE & AUTH SETUP ---
        let db, auth, userId;
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : undefined;

        window.initFirebase = async () => {
            if (!firebaseConfig || !firebaseConfig.apiKey) {
                document.getElementById('loading-message').textContent = 'Firebase config missing. Running offline.';
                window.loadData();
                return;
            }

            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                await (initialAuthToken
                    ? signInWithCustomToken(auth, initialAuthToken)
                    : signInAnonymously(auth)
                );

                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        userId = user.uid;
                        document.getElementById('user-id-display').textContent = `User ID: ${userId.substring(0, 8)}...`;
                        window.loadData();
                    } else {
                        // This case should ideally not happen if signed in anonymously
                        console.error("User not authenticated after sign-in attempt.");
                    }
                });

            } catch (error) {
                console.error("Firebase Initialization or Sign-in Error:", error);
                document.getElementById('loading-message').textContent = `Authentication failed. Running offline. (${error.message})`;
                // Fallback to offline
                window.loadData();
            }
        };

        // --- FIRESTORE FUNCTIONS ---
        const getProgressDocRef = (uid) => doc(db, 'artifacts', appId, 'users', uid, 'data', 'progress');

        window.loadData = async () => {
            if (db && userId) {
                const docRef = getProgressDocRef(userId);
                onSnapshot(docRef, (docSnap) => {
                    if (docSnap.exists()) {
                        window.currentProgress = docSnap.data().completion || {};
                        console.log("Progress loaded:", window.currentProgress);
                    } else {
                        console.log("No progress found, starting fresh.");
                        window.currentProgress = {};
                    }
                    window.activeCardList = LESSONS[window.currentLessonIndex].cards;
                    window.currentCardIndex = 0; // Reset index on load/lesson change
                    renderApp(); // Initial render after data is ready
                }, (error) => {
                    console.error("Error listening to progress:", error);
                    window.activeCardList = LESSONS[window.currentLessonIndex].cards;
                    renderApp();
                });
            } else {
                // Offline fallback
                window.activeCardList = LESSONS[window.currentLessonIndex].cards;
                renderApp();
            }
        };

        window.saveProgress = async () => {
            if (!db || !userId) return; // Skip if offline

            const docRef = getProgressDocRef(userId);
            try {
                await setDoc(docRef, { completion: window.currentProgress }, { merge: true });
                console.log("Progress saved successfully.");
            } catch (e) {
                console.error("Error saving document: ", e);
            }
        };

        // --- DATA (LESSONS AND CONVERSATIONS) ---
        const LESSONS = [
            // --- ID 1: Greetings & Politeness ---
            { id: 1, title: "Greetings & Politeness", progressKey: "greetings", cards: [
                { french: "Bonjour", english: "Hello / Good day", phonetic: "/bon-zhoor/", englishExample: "Bonjour, comment allez-vous ? (Hello, how are you?)" },
                { french: "Bonsoir", english: "Good evening", phonetic: "/bon-swar/", englishExample: "Bonsoir, vous avez passé une bonne journée ? (Good evening, did you have a good day?)" },
                { french: "Bonne nuit", english: "Good night (said before sleeping)", phonetic: "/bun nwee/", englishExample: "Dors bien. Bonne nuit! (Sleep well. Good night!)" },
                { french: "Salut", english: "Hi / Bye (informal)", phonetic: "/sah-loo/", englishExample: "Salut, ça va? (Hi, how's it going?)" },
                { french: "Au revoir", english: "Goodbye", phonetic: "/oh-ruh-vwar/", englishExample: "Au revoir, à demain. (Goodbye, see you tomorrow.)" },
                { french: "À bientôt", english: "See you soon", phonetic: "/ah byan-toh/", englishExample: "Je dois partir. À bientôt! (I have to leave. See you soon!)" },
                { french: "À tout à l'heure", english: "See you later (today)", phonetic: "/a too ta lur/", englishExample: "Je reviens. À tout à l'heure. (I'll be back. See you later.)" },
                { french: "Comment ça va ?", english: "How are you? (informal)", phonetic: "/ko-mon sa va/", englishExample: "Comment ça va aujourd'hui ? (How are you doing today?)" },
                { french: "Comment allez-vous ?", english: "How are you? (formal)", phonetic: "/ko-mon a-lay voo/", englishExample: "Comment allez-vous, Monsieur? (How are you, Sir?)" },
                { french: "Ça va bien, merci.", english: "I am fine, thank you.", phonetic: "/sa va byan mer-see/", englishExample: "Ça va bien, merci. Et vous? (I am fine, thank you. And you?)" },
                { french: "Je vais bien", english: "I am doing well", phonetic: "/zhuh vay byan/", englishExample: "Je vais bien. Je suis en forme. (I'm doing well. I'm fit/healthy.)" },
                { french: "Pas mal", english: "Not bad", phonetic: "/pah mal/", englishExample: "Pas mal, et toi? (Not bad, and you?)" },
                { french: "Et vous ?", english: "And you? (formal)", phonetic: "/ay voo/", englishExample: "Je suis fatigué. Et vous? (I am tired. And you?)" },
                { french: "S'il vous plaît", english: "Please (formal)", phonetic: "/seel voo play/", englishExample: "De l'eau, s'il vous plaît. (Water, please.)" },
                { french: "S'il te plaît", english: "Please (informal)", phonetic: "/seel tuh play/", englishExample: "Aide-moi, s'il te plaît. (Help me, please.)" },
                { french: "Merci beaucoup", english: "Thank you very much", phonetic: "/mer-see bo-koo/", englishExample: "Merci beaucoup pour votre aide. (Thank you very much for your help.)" },
                { french: "De rien", english: "You're welcome", phonetic: "/duh ryen/", englishExample: "Merci! - De rien. (Thank you! - You're welcome.)" },
                { french: "Je comprends", english: "I understand", phonetic: "/zhuh kom-pran/", englishExample: "Je comprends la leçon. (I understand the lesson.)" },
                { french: "Je ne comprends pas", english: "I do not understand", phonetic: "/zhuh nuh kom-pran pah/", englishExample: "Je ne comprends pas cette règle. (I do not understand this rule.)" },
                { french: "Excusez-moi", english: "Excuse me / I'm sorry", phonetic: "/ex-koo-zay mwah/", englishExample: "Excusez-moi, où est la gare? (Excuse me, where is the station?)" },
            ]},
            
            // --- ID 2: Verbs: Être, Avoir, Aller, Faire, Vouloir & More (CORREGIDO: Il/Elle separados) ---
            { id: 2, title: "Verbs: Être, Avoir, Aller, Faire, Vouloir & More", progressKey: "core_verbs", cards: [
                // ÊTRE (To be)
                { french: "Je suis", verbContext: "(Être)", english: "I am", phonetic: "/zhuh swee/", englishExample: "Je suis fatigué. (I am tired.)" }, 
                { french: "Tu es", verbContext: "(Être)", english: "You are (informal)", phonetic: "/too eh/", englishExample: "Tu es étudiant. (You are a student.)" },
                { french: "Il est", verbContext: "(Être)", english: "He is", phonetic: "/eel eh/", englishExample: "Il est français. (He is French.)" },
                { french: "Elle est", verbContext: "(Être)", english: "She is", phonetic: "/el eh/", englishExample: "Elle est belle. (She is beautiful.)" },
                { french: "Nous sommes", verbContext: "(Être)", english: "We are", phonetic: "/noo sum/", englishExample: "Nous sommes amis. (We are friends.)" },
                { french: "Vous êtes", verbContext: "(Être)", english: "You are (formal/plural)", phonetic: "/voo zet/", englishExample: "Vous êtes très gentil. (You are very kind.)" }, 
                { french: "Ils sont", verbContext: "(Être)", english: "They are (masc/mixed)", phonetic: "/eel son/", englishExample: "Ils sont à Paris. (They are in Paris.)" },
                { french: "Elles sont", verbContext: "(Être)", english: "They are (fem)", phonetic: "/el son/", englishExample: "Elles sont intelligentes. (They are intelligent.)" },
        
                // AVOIR (To have)
                { french: "J'ai", verbContext: "(Avoir)", english: "I have", phonetic: "/zheh/", englishExample: "J'ai vingt ans. (I am twenty years old.)" },
                { french: "Tu as", verbContext: "(Avoir)", english: "You have (informal)", phonetic: "/too ah/", englishExample: "Tu as un chien. (You have a dog.)" },
                { french: "Il a", verbContext: "(Avoir)", english: "He has", phonetic: "/eel ah/", englishExample: "Il a faim. (He is hungry/has hunger.)" },
                { french: "Elle a", verbContext: "(Avoir)", english: "She has", phonetic: "/el ah/", englishExample: "Elle a chaud. (She is hot/has heat.)" },
                { french: "Nous avons", verbContext: "(Avoir)", english: "We have", phonetic: "/noo za-von/", englishExample: "Nous avons une voiture. (We have a car.)" },
                { french: "Vous avez", verbContext: "(Avoir)", english: "You have (formal/plural)", phonetic: "/voo za-vay/", englishExample: "Vous avez l'heure? (Do you have the time?)" },
                { french: "Ils ont", verbContext: "(Avoir)", english: "They have (masc/mixed)", phonetic: "/eel zon/", englishExample: "Ils ont des livres. (They have some books.)" },
                { french: "Elles ont", verbContext: "(Avoir)", english: "They have (fem)", phonetic: "/el zon/", englishExample: "Elles ont de la chance. (They are lucky/have luck.)" },
                
                // ALLER (To go)
                { french: "Je vais", verbContext: "(Aller)", english: "I go / I am going", phonetic: "/zhuh vay/", englishExample: "Je vais à la plage. (I'm going to the beach.)" }, 
                { french: "Tu vas", verbContext: "(Aller)", english: "You go (informal)", phonetic: "/too vah/", englishExample: "Comment vas-tu? (How are you going?)" },
                { french: "Il va", verbContext: "(Aller)", english: "He goes", phonetic: "/eel vah/", englishExample: "Il va au travail. (He goes to work.)" },
                { french: "Elle va", verbContext: "(Aller)", english: "She goes", phonetic: "/el vah/", englishExample: "Elle va mieux. (She is doing better.)" },
                { french: "Nous allons", verbContext: "(Aller)", english: "We go", phonetic: "/noo za-lon/", englishExample: "Nous allons manger. (We are going to eat.)" },
                { french: "Vous allez", verbContext: "(Aller)", english: "You go (formal/plural)", phonetic: "/voo za-lay/", englishExample: "Où allez-vous ? (Where are you going?)" },
                { french: "Ils vont", verbContext: "(Aller)", english: "They go (masc/mixed)", phonetic: "/eel von/", englishExample: "Ils vont à l'école. (They go to school.)" },
                
                // FAIRE (To do / To make)
                { french: "Je fais", verbContext: "(Faire)", english: "I do / I make", phonetic: "/zhuh fay/", englishExample: "Je fais du sport. (I do sports.)" }, 
                { french: "Tu fais", verbContext: "(Faire)", english: "You do (informal)", phonetic: "/too fay/", englishExample: "Qu'est-ce que tu fais? (What are you doing?)" },
                { french: "Il fait", verbContext: "(Faire)", english: "He does / He makes", phonetic: "/eel fay/", englishExample: "Il fait ses devoirs. (He does his homework.)" },
                { french: "Elle fait", verbContext: "(Faire)", english: "She does / She makes", phonetic: "/el fay/", englishExample: "Elle fait un gâteau. (She is making a cake.)" },
                { french: "Nous faisons", verbContext: "(Faire)", english: "We do / We make", phonetic: "/noo fuh-zon/", englishExample: "Nous faisons la fête. (We are throwing a party.)" },
                { french: "Vous faites", verbContext: "(Faire)", english: "You do (formal/plural)", phonetic: "/voo fet/", englishExample: "Faites attention! (Pay attention!)" },
                
                // VOULOIR (To want)
                { french: "Je veux", verbContext: "(Vouloir)", english: "I want", phonetic: "/zhuh vuh/", englishExample: "Je veux un croissant. (I want a croissant.)" },
                { french: "Tu veux", verbContext: "(Vouloir)", english: "You want (informal)", phonetic: "/too vuh/", englishExample: "Tu veux du thé ou du café? (Do you want tea or coffee?)" },
                { french: "Il veut", verbContext: "(Vouloir)", english: "He wants", phonetic: "/eel vuh/", englishExample: "Il veut partir. (He wants to leave.)" },
                { french: "Elle veut", verbContext: "(Vouloir)", english: "She wants", phonetic: "/el vuh/", englishExample: "Elle veut une réponse. (She wants an answer.)" },
                { french: "Nous voulons", verbContext: "(Vouloir)", english: "We want", phonetic: "/noo voo-lon/", englishExample: "Nous voulons voir un film. (We want to see a movie.)" },
                { french: "Vous voulez", verbContext: "(Vouloir)", english: "You want (formal/plural)", phonetic: "/voo voo-lay/", englishExample: "Que voulez-vous? (What do you want?)" },
                
                // POUVOIR (Can / To be able to)
                { french: "Je peux", verbContext: "(Pouvoir)", english: "I can / I am able to", phonetic: "/zhuh puh/", englishExample: "Je peux t'aider. (I can help you.)" },
                { french: "Tu peux", verbContext: "(Pouvoir)", english: "You can (informal)", phonetic: "/too puh/", englishExample: "Où est-ce que tu peux aller? (Where can you go?)" },
                { french: "Il peut", verbContext: "(Pouvoir)", english: "He can", phonetic: "/eel puh/", englishExample: "Il peut le faire. (He can do it.)" },
                { french: "Elle peut", verbContext: "(Pouvoir)", english: "She can", phonetic: "/el puh/", englishExample: "Elle peut venir. (She can come.)" },
                { french: "Nous pouvons", verbContext: "(Pouvoir)", english: "We can", phonetic: "/noo poo-von/", englishExample: "Nous pouvons le faire. (We can do it.)" },
                { french: "Vous pouvez", verbContext: "(Pouvoir)", english: "You can (formal/plural)", phonetic: "/voo poo-vay/", englishExample: "Pouvez-vous m'aider? (Can you help me?)" },
        
                // DIRE (To say / To tell)
                { french: "Je dis", verbContext: "(Dire)", english: "I say / I tell", phonetic: "/zhuh dee/", englishExample: "Je dis 'bonjour'. (I say 'hello'.)" },
                { french: "Tu dis", verbContext: "(Dire)", english: "You say (informal)", phonetic: "/too dee/", englishExample: "Que dis-tu? (What are you saying?)" },
                { french: "Il dit", verbContext: "(Dire)", english: "He says / He tells", phonetic: "/eel dee/", englishExample: "Il dit la vérité. (He tells the truth.)" },
                { french: "Elle dit", verbContext: "(Dire)", english: "She says / She tells", phonetic: "/el dee/", englishExample: "Elle dit 'oui'. (She says 'yes'.)" },
                { french: "Nous disons", verbContext: "(Dire)", english: "We say / We tell", phonetic: "/noo dee-zon/", englishExample: "Nous disons au revoir. (We say goodbye.)" },
                { french: "Vous dites", verbContext: "(Dire)", english: "You say (formal/plural)", phonetic: "/voo deet/", englishExample: "Que dites-vous? (What are you saying?)" },
                
                // VOIR (To see)
                { french: "Je vois", verbContext: "(Voir)", english: "I see", phonetic: "/zhuh vwah/", englishExample: "Je vois la montagne. (I see the mountain.)" },
                { french: "Tu vois", verbContext: "(Voir)", english: "You see (informal)", phonetic: "/too vwah/", englishExample: "Tu vois ça? (Do you see that?)" },
                { french: "Il voit", verbContext: "(Voir)", english: "He sees", phonetic: "/eel vwah/", englishExample: "Il voit la voiture. (He sees the car.)" },
                { french: "Nous voyons", verbContext: "(Voir)", english: "We see", phonetic: "/noo vwa-yon/", englishExample: "Nous voyons le film. (We are watching the movie.)" },
                { french: "Vous voyez", verbContext: "(Voir)", english: "You see (formal/plural)", phonetic: "/voo vwa-yay/", englishExample: "Vous voyez bien? (Do you see well?)" },
            ]},
            
            // --- ID 3: Survival Phrases & Travel (Ejemplos ya completos) ---
            { id: 3, title: "Survival Phrases & Travel", progressKey: "survival_phrases", cards: [
                { french: "Parlez-vous anglais ?", english: "Do you speak English?", phonetic: "/par-lay voo zang-lay/", englishExample: "Je parle juste un peu. (I only speak a little.)" }, 
                { french: "Où sont les toilettes ?", english: "Where is the restroom?", phonetic: "/oo son lay twa-let/", englishExample: "C'est par là. (It's over there.)" },
                { french: "Quel est le prix ?", english: "What is the price?", phonetic: "/kel eh luh pree/", englishExample: "C'est cinquante euros. (It's fifty euros.)" },
                { french: "J'aimerais payer.", english: "I would like to pay.", phonetic: "/zhem-ray pay-yay/", englishExample: "La note, s'il vous plaît. (The check, please.)" },
                { french: "J'ai besoin d'aide.", english: "I need help.", phonetic: "/zheh buh-zwan ded/", englishExample: "Appelez un médecin! (Call a doctor!)" },
                { french: "Je voudrais...", english: "I would like...", phonetic: "/zhuh voo-dray/", englishExample: "Je voudrais un café. (I would like a coffee.)" },
                { french: "Une table pour deux.", english: "A table for two.", phonetic: "/oon tabl poor duh/", englishExample: "Une table pour deux, non-fumeur. (A table for two, non-smoking.)" },
                { french: "C'est délicieux.", english: "It is delicious.", phonetic: "/say day-lee-syeuh/", englishExample: "Ce plat est délicieux! (This dish is delicious!)" },
                { french: "Je suis désolé(e).", english: "I am sorry (m/f).", phonetic: "/zhuh swee day-zo-lay/", englishExample: "Je suis désolée pour le retard. (I am sorry for the delay.)" },
                { french: "À droite / À gauche", english: "To the right / To the left", phonetic: "/a drwat / a gosh/", englishExample: "Tournez à droite. (Turn to the right.)" },
                { french: "Tout droit", english: "Straight ahead", phonetic: "/too drwah/", englishExample: "Allez tout droit. (Go straight ahead.)" },
                { french: "Le bus", english: "The bus", phonetic: "/luh booss/", englishExample: "Où est l'arrêt de bus? (Where is the bus stop?)" },
                { french: "Le train", english: "The train", phonetic: "/luh tran/", englishExample: "Le train arrive. (The train is arriving.)" },
                { french: "L'aéroport (m)", english: "The airport", phonetic: "/lay-ay-roh-por/", englishExample: "Je vais à l'aéroport. (I am going to the airport.)" },
                { french: "L'hôtel (m)", english: "The hotel", phonetic: "/loh-tel/", englishExample: "Où est mon hôtel? (Where is my hotel?)" },
                { french: "J'ai une réservation.", english: "I have a reservation.", phonetic: "/zheh oon ray-zer-va-syon/", englishExample: "J'ai une réservation au nom de Smith. (I have a reservation under the name Smith.)" },
                { french: "C'est loin / C'est près", english: "It is far / It is near", phonetic: "/say lwan / say preh/", englishExample: "Est-ce que c'est loin d'ici? (Is it far from here?)" },
                { french: "Je suis perdu(e).", english: "I am lost (m/f).", phonetic: "/zhuh swee per-doo/", englishExample: "Je suis perdue, pouvez-vous m'aider? (I am lost, can you help me?)" },
                { french: "Puis-je avoir un plan ?", english: "Can I have a map?", phonetic: "/pweezh a-vwar uh plan/", englishExample: "Puis-je avoir un plan de la ville? (Can I have a map of the city?)" },
                { french: "L'addition, s'il vous plaît.", english: "The check/bill, please.", phonetic: "/la-dee-syon seel voo play/", englishExample: "Nous sommes pressés. L'addition, s'il vous plaît. (We are in a hurry. The check, please.)" },
            ]},
        
            // --- ID 4: Numbers (0-100) (CORREGIDO: TODOS CON EJEMPLOS) ---
            { id: 4, title: "Numbers (0-100)", progressKey: "numbers_0_100", cards: [
                // Números 0 a 20
                { french: "Zéro", english: "Zero", phonetic: "/ze-roh/", englishExample: "Il y a zéro erreur. (There are zero errors.)" }, 
                { french: "Un", english: "One", phonetic: "/uh/", englishExample: "J'ai un chien. (I have one dog.)" }, 
                { french: "Deux", english: "Two", phonetic: "/duh/", englishExample: "Nous avons deux chats. (We have two cats.)" },
                { french: "Trois", english: "Three", phonetic: "/trwah/", englishExample: "Il est trois heures. (It is three o'clock.)" }, 
                { french: "Quatre", english: "Four", phonetic: "/katr/", englishExample: "Il me faut quatre œufs. (I need four eggs.)" },
                { french: "Cinq", english: "Five", phonetic: "/sank/", englishExample: "J'ai cinq doigts. (I have five fingers.)" },
                { french: "Six", english: "Six", phonetic: "/seess/", englishExample: "Le train part à six heures. (The train leaves at six.)" },
                { french: "Sept", english: "Seven", phonetic: "/set/", englishExample: "C'est le septième jour. (It's the seventh day.)" },
                { french: "Huit", english: "Eight", phonetic: "/weet/", englishExample: "Mon anniversaire est le huit. (My birthday is the eighth.)" },
                { french: "Neuf", english: "Nine", phonetic: "/nuf/", englishExample: "Neuf minutes. (Nine minutes.)" },
                { french: "Dix", english: "Ten", phonetic: "/dees/", englishExample: "Dix euros, s'il vous plaît. (Ten euros, please.)" },
                { french: "Onze", english: "Eleven", phonetic: "/onz/", englishExample: "J'ai onze ans. (I am eleven years old.)" },
                { french: "Douze", english: "Twelve", phonetic: "/dooz/", englishExample: "Douze mois dans l'année. (Twelve months in the year.)" },
                { french: "Treize", english: "Thirteen", phonetic: "/trez/", englishExample: "J'ai treize livres. (I have thirteen books.)" }, 
                { french: "Quatorze", english: "Fourteen", phonetic: "/ka-torz/", englishExample: "La chambre quatorze. (Room fourteen.)" },
                { french: "Quinze", english: "Fifteen", phonetic: "/kanz/", englishExample: "Il est quinze heures (3 PM). (It is fifteen o'clock.)" }, 
                { french: "Seize", english: "Sixteen", phonetic: "/sez/", englishExample: "Dix jours et seize nuits. (Ten days and sixteen nights.)" },
                { french: "Dix-sept", english: "Seventeen", phonetic: "/dee-set/", englishExample: "Dix-sept personnes. (Seventeen people.)" }, 
                { french: "Dix-huit", english: "Eighteen", phonetic: "/dee-zweet/", englishExample: "Elle a dix-huit ans. (She is eighteen years old.)" },
                { french: "Dix-neuf", english: "Nineteen", phonetic: "/deez-nuf/", englishExample: "Le numéro dix-neuf. (Number nineteen.)" }, 
                { french: "Vingt", english: "Twenty", phonetic: "/vant/", englishExample: "Vingt minutes d'attente. (Twenty minutes wait.)" },
        
                // Números 21 a 60
                { french: "Vingt-et-un", english: "Twenty-one", phonetic: "/vant-ay-uh/", englishExample: "Vingt-et-un jours. (Twenty-one days.)" }, 
                { french: "Vingt-deux", english: "Twenty-two", phonetic: "/vant-duh/", englishExample: "Il a vingt-deux ans. (He is twenty-two years old.)" }, 
                { french: "Vingt-trois", english: "Twenty-three", phonetic: "/vant-trwah/", englishExample: "Il est vingt-trois heures (11 PM). (It is twenty-three o'clock.)" }, 
                { french: "Vingt-quatre", english: "Twenty-four", phonetic: "/vant-katr/", englishExample: "Vingt-quatre heures. (Twenty-four hours.)" }, 
                { french: "Vingt-cinq", english: "Twenty-five", phonetic: "/vant-sank/", englishExample: "J'ai vingt-cinq ans. (I am twenty-five years old.)" }, 
                { french: "Vingt-six", english: "Twenty-six", phonetic: "/vant-seess/", englishExample: "Vingt-six livres. (Twenty-six books.)" }, 
                { french: "Vingt-sept", english: "Twenty-seven", phonetic: "/vant-set/", englishExample: "Vingt-sept pommes. (Twenty-seven apples.)" }, 
                { french: "Vingt-huit", english: "Twenty-eight", phonetic: "/vant-weet/", englishExample: "Vingt-huit degrés. (Twenty-eight degrees.)" }, 
                { french: "Vingt-neuf", english: "Twenty-nine", phonetic: "/vant-nuf/", englishExample: "Vingt-neuf euros. (Twenty-nine euros.)" }, 
                { french: "Trente", english: "Thirty", phonetic: "/tront/", englishExample: "Trente jours. (Thirty days.)" },
                { french: "Trente-et-un", english: "Thirty-one", phonetic: "/tront-ay-uh/", englishExample: "Trente-et-un décembre. (December thirty-first.)" }, 
                { french: "Trente-deux", english: "Thirty-two", phonetic: "/tront-duh/", englishExample: "Mon bus est le trente-deux. (My bus is number thirty-two.)" }, 
                { french: "Trente-trois", english: "Thirty-three", phonetic: "/tront-trwah/", englishExample: "Trente-trois ans. (Thirty-three years.)" }, 
                { french: "Trente-quatre", english: "Thirty-four", phonetic: "/tront-katr/", englishExample: "Trente-quatre dollars. (Thirty-four dollars.)" }, 
                { french: "Trente-cinq", english: "Thirty-five", phonetic: "/tront-sank/", englishExample: "J'ai besoin de trente-cinq. (I need thirty-five.)" }, 
                { french: "Trente-six", english: "Thirty-six", phonetic: "/tront-seess/", englishExample: "Trente-six pièces. (Thirty-six coins/pieces.)" }, 
                { french: "Trente-sept", english: "Thirty-seven", phonetic: "/tront-set/", englishExample: "Trente-sept personnes. (Thirty-seven people.)" }, 
                { french: "Trente-huit", english: "Thirty-eight", phonetic: "/tront-weet/", englishExample: "Trente-huit kilos. (Thirty-eight kilograms.)" }, 
                { french: "Trente-neuf", english: "Thirty-nine", phonetic: "/tront-nuf/", englishExample: "Trente-neuf minutes. (Thirty-nine minutes.)" }, 
                { french: "Quarante", english: "Forty", phonetic: "/ka-ront/", englishExample: "J'ai quarante ans. (I am forty years old.)" },
                { french: "Quarante-et-un", english: "Forty-one", phonetic: "/ka-ront-ay-uh/", englishExample: "Quarante-et-un degrés. (Forty-one degrees.)" }, 
                { french: "Quarante-deux", english: "Forty-two", phonetic: "/ka-ront-duh/", englishExample: "Il y a quarante-deux. (There are forty-two.)" },
                { french: "Quarante-trois", english: "Forty-three", phonetic: "/ka-ront-trwah/", englishExample: "Quarante-trois hommes. (Forty-three men.)" }, 
                { french: "Quarante-quatre", english: "Forty-four", phonetic: "/ka-ront-katr/", englishExample: "Le bus quarante-quatre. (Bus forty-four.)" },
                { french: "Quarante-cinq", english: "Forty-five", phonetic: "/ka-ront-sank/", englishExample: "Il a quarante-cinq ans. (He is forty-five years old.)" }, 
                { french: "Quarante-six", english: "Forty-six", phonetic: "/ka-ront-seess/", englishExample: "J'ai quarante-six. (I have forty-six.)" },
                { french: "Quarante-sept", english: "Forty-seven", phonetic: "/ka-ront-set/", englishExample: "Quarante-sept minutes. (Forty-seven minutes.)" }, 
                { french: "Quarante-huit", english: "Forty-eight", phonetic: "/ka-ront-weet/", englishExample: "Le prix est quarante-huit. (The price is forty-eight.)" },
                { french: "Quarante-neuf", english: "Forty-nine", phonetic: "/ka-ront-nuf/", englishExample: "Quarante-neuf centimes. (Forty-nine cents.)" }, 
                { french: "Cinquante", english: "Fifty", phonetic: "/sank-ont/", englishExample: "Cinquante pour cent. (Fifty percent.)" },
                { french: "Cinquante-et-un", english: "Fifty-one", phonetic: "/sank-ont-ay-uh/", englishExample: "Cinquante-et-un jours. (Fifty-one days.)" }, 
                { french: "Cinquante-deux", english: "Fifty-two", phonetic: "/sank-ont-duh/", englishExample: "Cinquante-deux semaines. (Fifty-two weeks.)" },
                { french: "Cinquante-trois", english: "Fifty-three", phonetic: "/sank-ont-trwah/", englishExample: "Cinquante-trois mètres. (Fifty-three meters.)" }, 
                { french: "Cinquante-quatre", english: "Fifty-four", phonetic: "/sank-ont-katr/", englishExample: "Cinquante-quatre ballons. (Fifty-four balloons.)" },
                { french: "Cinquante-cinq", english: "Fifty-five", phonetic: "/sank-ont-sank/", englishExample: "Cinquante-cinq minutes. (Fifty-five minutes.)" }, 
                { french: "Cinquante-six", english: "Fifty-six", phonetic: "/sank-ont-seess/", englishExample: "Cinquante-six. (Fifty-six.)" },
                { french: "Cinquante-sept", english: "Fifty-seven", phonetic: "/sank-ont-set/", englishExample: "Cinquante-sept. (Fifty-seven.)" }, 
                { french: "Cinquante-huit", english: "Fifty-eight", phonetic: "/sank-ont-weet/", englishExample: "Cinquante-huit. (Fifty-eight.)" },
                { french: "Cinquante-neuf", english: "Fifty-nine", phonetic: "/sank-ont-nuf/", englishExample: "Cinquante-neuf. (Fifty-nine.)" },
                { french: "Soixante", english: "Sixty", phonetic: "/swa-sant/", englishExample: "Soixante minutes dans une heure. (Sixty minutes in an hour.)" },
        
                // Números 61 a 79
                { french: "Soixante-et-un", english: "Sixty-one", phonetic: "/swa-sant-ay-uh/", englishExample: "Soixante-et-un ans. (Sixty-one years old.)" }, 
                { french: "Soixante-deux", english: "Sixty-two", phonetic: "/swa-sant-duh/", englishExample: "Soixante-deux euros. (Sixty-two euros.)" },
                { french: "Soixante-trois", english: "Sixty-three", phonetic: "/swa-sant-trwah/", englishExample: "Soixante-trois. (Sixty-three.)" }, 
                { french: "Soixante-quatre", english: "Sixty-four", phonetic: "/swa-sant-katr/", englishExample: "Soixante-quatre. (Sixty-four.)" },
                { french: "Soixante-cinq", english: "Sixty-five", phonetic: "/swa-sant-sank/", englishExample: "Soixante-cinq. (Sixty-five.)" }, 
                { french: "Soixante-six", english: "Sixty-six", phonetic: "/swa-sant-seess/", englishExample: "Soixante-six. (Sixty-six.)" },
                { french: "Soixante-sept", english: "Sixty-seven", phonetic: "/swa-sant-set/", englishExample: "Soixante-sept. (Sixty-seven.)" }, 
                { french: "Soixante-huit", english: "Sixty-eight", phonetic: "/swa-sant-weet/", englishExample: "Soixante-huit. (Sixty-eight.)" },
                { french: "Soixante-neuf", english: "Sixty-nine", phonetic: "/swa-sant-nuf/", englishExample: "Soixante-neuf. (Sixty-nine.)" },
                { french: "Soixante-dix", english: "Seventy (60+10)", phonetic: "/swa-sant-dees/", englishExample: "Soixante-dix euros. (Seventy euros.)" },
                { french: "Soixante-onze", english: "Seventy-one (60+11)", phonetic: "/swa-sant-onz/", englishExample: "Soixante-onze ans. (Seventy-one years old.)" }, 
                { french: "Soixante-douze", english: "Seventy-two (60+12)", phonetic: "/swa-sant-dooz/", englishExample: "Soixante-douze heures. (Seventy-two hours.)" },
                { french: "Soixante-treize", english: "Seventy-three (60+13)", phonetic: "/swa-sant-trez/", englishExample: "Soixante-treize. (Seventy-three.)" }, 
                { french: "Soixante-quatorze", english: "Seventy-four (60+14)", phonetic: "/swa-sant-ka-torz/", englishExample: "Soixante-quatorze. (Seventy-four.)" },
                { french: "Soixante-quinze", english: "Seventy-five (60+15)", phonetic: "/swa-sant-kanz/", englishExample: "Soixante-quinze. (Seventy-five.)" }, 
                { french: "Soixante-seize", english: "Seventy-six (60+16)", phonetic: "/swa-sant-sez/", englishExample: "Soixante-seize. (Seventy-six.)" },
                { french: "Soixante-dix-sept", english: "Seventy-seven (60+17)", phonetic: "/swa-sant-dee-set/", englishExample: "Soixante-dix-sept. (Seventy-seven.)" }, 
                { french: "Soixante-dix-huit", english: "Seventy-eight (60+18)", phonetic: "/swa-sant-dee-zweet/", englishExample: "Soixante-dix-huit. (Seventy-eight.)" },
                { french: "Soixante-dix-neuf", english: "Seventy-nine (60+19)", phonetic: "/swa-sant-deez-nuf/", englishExample: "Soixante-dix-neuf. (Seventy-nine.)" },
        
                // Números 80 a 100
                { french: "Quatre-vingts", english: "Eighty (4x20)", phonetic: "/katr-vant/", englishExample: "Quatre-vingts ans. (Eighty years old.)" },
                { french: "Quatre-vingt-un", english: "Eighty-one (4x20+1)", phonetic: "/katr-vant-uh/", englishExample: "Quatre-vingt-un. (Eighty-one.)" }, 
                { french: "Quatre-vingt-deux", english: "Eighty-two (4x20+2)", phonetic: "/katr-vant-duh/", englishExample: "Quatre-vingt-deux. (Eighty-two.)" },
                { french: "Quatre-vingt-trois", english: "Eighty-three (4x20+3)", phonetic: "/katr-vant-trwah/", englishExample: "Quatre-vingt-trois. (Eighty-three.)" },
                { french: "Quatre-vingt-quatre", english: "Eighty-four (4x20+4)", phonetic: "/katr-vant-katr/", englishExample: "Quatre-vingt-quatre. (Eighty-four.)" },
                { french: "Quatre-vingt-cinq", english: "Eighty-five (4x20+5)", phonetic: "/katr-vant-sank/", englishExample: "Quatre-vingt-cinq. (Eighty-five.)" },
                { french: "Quatre-vingt-six", english: "Eighty-six (4x20+6)", phonetic: "/katr-vant-seess/", englishExample: "Quatre-vingt-six. (Eighty-six.)" },
                { french: "Quatre-vingt-sept", english: "Eighty-seven (4x20+7)", phonetic: "/katr-vant-set/", englishExample: "Quatre-vingt-sept. (Eighty-seven.)" },
                { french: "Quatre-vingt-huit", english: "Eighty-eight (4x20+8)", phonetic: "/katr-vant-weet/", englishExample: "Quatre-vingt-huit. (Eighty-eight.)" },
                { french: "Quatre-vingt-neuf", english: "Eighty-nine (4x20+9)", phonetic: "/katr-vant-nuf/", englishExample: "Quatre-vingt-neuf. (Eighty-nine.)" },
                { french: "Quatre-vingt-dix", english: "Ninety (4x20+10)", phonetic: "/katr-vant-dees/", englishExample: "Quatre-vingt-dix ans. (Ninety years old.)" },
                { french: "Quatre-vingt-onze", english: "Ninety-one (4x20+11)", phonetic: "/katr-vant-onz/", englishExample: "Quatre-vingt-onze. (Ninety-one.)" }, 
                { french: "Quatre-vingt-douze", english: "Ninety-two (4x20+12)", phonetic: "/katr-vant-dooz/", englishExample: "Quatre-vingt-douze. (Ninety-two.)" },
                { french: "Quatre-vingt-treize", english: "Ninety-three (4x20+13)", phonetic: "/katr-vant-trez/", englishExample: "Quatre-vingt-treize. (Ninety-three.)" },
                { french: "Quatre-vingt-quatorze", english: "Ninety-four (4x20+14)", phonetic: "/katr-vant-ka-torz/", englishExample: "Quatre-vingt-quatorze. (Ninety-four.)" },
                { french: "Quatre-vingt-quinze", english: "Ninety-five (4x20+15)", phonetic: "/katr-vant-kanz/", englishExample: "Quatre-vingt-quinze. (Ninety-five.)" },
                { french: "Quatre-vingt-seize", english: "Ninety-six (4x20+16)", phonetic: "/katr-vant-sez/", englishExample: "Quatre-vingt-seize. (Ninety-six.)" },
                { french: "Quatre-vingt-dix-sept", english: "Ninety-seven (4x20+17)", phonetic: "/katr-vant-dee-set/", englishExample: "Quatre-vingt-dix-sept. (Ninety-seven.)" },
                { french: "Quatre-vingt-dix-huit", english: "Ninety-eight (4x20+18)", phonetic: "/katr-vant-dee-zweet/", englishExample: "Quatre-vingt-dix-huit. (Ninety-eight.)" },
                { french: "Quatre-vingt-dix-neuf", english: "Ninety-nine (4x20+19)", phonetic: "/katr-vant-deez-nuf/", englishExample: "Quatre-vingt-dix-neuf. (Ninety-nine.)" },
                { french: "Cent", english: "One Hundred", phonetic: "/sant/", englishExample: "Cent personnes. (One hundred people.)" },
            ]},
        
            // --- ID 5: Common Animals (CORREGIDO: TODOS CON EJEMPLOS) ---
            { id: 5, title: "Common Animals", progressKey: "animals_60", cards: [
                { french: "Le chien", english: "Dog", phonetic: "/luh shyen/", englishExample: "Le chien est grand. (The dog is big.)" }, 
                { french: "Le chat", english: "Cat", phonetic: "/luh shah/", englishExample: "Le chat dort. (The cat is sleeping.)" },
                { french: "Le cheval", english: "Horse", phonetic: "/luh shuh-val/", englishExample: "J'aime monter à cheval. (I like to ride horses.)" }, 
                { french: "La vache", english: "Cow", phonetic: "/la vash/", englishExample: "La vache donne du lait. (The cow gives milk.)" },
                { french: "Le cochon", english: "Pig", phonetic: "/luh ko-shon/", englishExample: "Le cochon est dans la ferme. (The pig is on the farm.)" }, 
                { french: "La chèvre", english: "Goat", phonetic: "/la shevr/", englishExample: "La chèvre est dans la montagne. (The goat is in the mountain.)" },
                { french: "Le mouton", english: "Sheep", phonetic: "/luh moo-ton/", englishExample: "Le mouton a de la laine. (The sheep has wool.)" }, 
                { french: "Le lapin", english: "Rabbit", phonetic: "/luh la-pan/", englishExample: "Le lapin mange une carotte. (The rabbit is eating a carrot.)" },
                { french: "Le canard", english: "Duck", phonetic: "/luh ka-nar/", englishExample: "Le canard nage dans l'eau. (The duck swims in the water.)" }, 
                { french: "La poule", english: "Chicken (hen)", phonetic: "/la pool/", englishExample: "La poule pond des œufs. (The hen lays eggs.)" },
                { french: "Le dindon", english: "Turkey", phonetic: "/luh dan-don/", englishExample: "Le dindon est un grand oiseau. (The turkey is a large bird.)" }, 
                { french: "L'oie (f)", english: "Goose", phonetic: "/lwa/", englishExample: "L'oie est bruyante. (The goose is noisy.)" },
                { french: "Le poisson", english: "Fish", phonetic: "/luh pwa-son/", englishExample: "Le poisson vit dans la mer. (The fish lives in the sea.)" }, 
                { french: "L'oiseau (m)", english: "Bird", phonetic: "/lwa-zoh/", englishExample: "L'oiseau chante. (The bird sings.)" },
                { french: "Le lion", english: "Lion", phonetic: "/luh lee-on/", englishExample: "Le lion est fort. (The lion is strong.)" }, 
                { french: "Le tigre", english: "Tiger", phonetic: "/luh tee-gr/", englishExample: "Le tigre est rayé. (The tiger is striped.)" },
                { french: "L'éléphant (m)", english: "Elephant", phonetic: "/lay-lay-fan/", englishExample: "L'éléphant a une trompe. (The elephant has a trunk.)" },
                { french: "La girafe", english: "Giraffe", phonetic: "/la zhee-raf/", englishExample: "La girafe est très haute. (The giraffe is very tall.)" },
                { french: "Le singe", english: "Monkey", phonetic: "/luh sanj/", englishExample: "Le singe mange une banane. (The monkey is eating a banana.)" },
                { french: "L'ours (m)", english: "Bear", phonetic: "/loors/", englishExample: "L'ours hiberne en hiver. (The bear hibernates in winter.)" },
                { french: "Le loup", english: "Wolf", phonetic: "/luh loo/", englishExample: "Le loup hurle la nuit. (The wolf howls at night.)" }, 
                { french: "Le renard", english: "Fox", phonetic: "/luh ruh-nar/", englishExample: "Le renard est rusé. (The fox is cunning.)" },
                { french: "Le cerf", english: "Deer", phonetic: "/luh serf/", englishExample: "Le cerf a de grands bois. (The deer has large antlers.)" }, 
                { french: "L'écureuil (m)", english: "Squirrel", phonetic: "/lay-koo-roy/", englishExample: "L'écureuil collectionne des noix. (The squirrel collects nuts.)" },
                { french: "Le hérisson", english: "Hedgehog", phonetic: "/luh ay-ree-son/", englishExample: "Le hérisson a des piquants. (The hedgehog has quills.)" }, 
                { french: "La souris", english: "Mouse", phonetic: "/la soo-ree/", englishExample: "La souris est petite. (The mouse is small.)" },
                { french: "Le rat", english: "Rat", phonetic: "/luh rah/", englishExample: "Le rat vit dans les égouts. (The rat lives in the sewers.)" }, 
                { french: "La chauve-souris", english: "Bat", phonetic: "/la shohv-soo-ree/", englishExample: "La chauve-souris vole la nuit. (The bat flies at night.)" },
                { french: "Le serpent", english: "Snake", phonetic: "/luh ser-pon/", englishExample: "Attention au serpent! (Watch out for the snake!)" }, 
                { french: "La tortue", english: "Turtle", phonetic: "/la tor-too/", englishExample: "La tortue est lente. (The turtle is slow.)" },
                { french: "Le crocodile", english: "Crocodile", phonetic: "/luh kro-ko-deel/", englishExample: "Le crocodile est dangereux. (The crocodile is dangerous.)" }, 
                { french: "Le lézard", english: "Lizard", phonetic: "/luh lay-zar/", englishExample: "Le lézard aime le soleil. (The lizard loves the sun.)" },
                { french: "La grenouille", english: "Frog", phonetic: "/luh gruh-nooy/", englishExample: "La grenouille saute. (The frog jumps.)" }, 
                { french: "Le papillon", english: "Butterfly", phonetic: "/luh pa-pee-yon/", englishExample: "Le papillon est beau. (The butterfly is beautiful.)" },
                { french: "L'abeille (f)", english: "Bee", phonetic: "/la-bay/", englishExample: "L'abeille fait du miel. (The bee makes honey.)" }, 
                { french: "La fourmi", english: "Ant", phonetic: "/la foor-mee/", englishExample: "La fourmi est petite et travailleuse. (The ant is small and hardworking.)" },
                { french: "Le moustique", english: "Mosquito", phonetic: "/luh moos-teek/", englishExample: "Le moustique pique la peau. (The mosquito stings the skin.)" }, 
                { french: "L'araignée (f)", english: "Spider", phonetic: "/la-re-nyay/", englishExample: "L'araignée tisse une toile. (The spider weaves a web.)" },
                { french: "La mouche", english: "Fly", phonetic: "/la moosh/", englishExample: "La mouche est agaçante. (The fly is annoying.)" }, 
                { french: "Le coq", english: "Rooster", phonetic: "/luh kok/", englishExample: "Le coq chante le matin. (The rooster sings in the morning.)" },
                { french: "Le hibou", english: "Owl", phonetic: "/luh ee-boo/", englishExample: "Le hibou chasse la nuit. (The owl hunts at night.)" }, 
                { french: "Le pigeon", english: "Pigeon", phonetic: "/luh pee-zhohn/", englishExample: "Le pigeon est en ville. (The pigeon is in the city.)" },
                { french: "L'aigle (m)", english: "Eagle", phonetic: "/lay-gl/", englishExample: "L'aigle est un rapace. (The eagle is a bird of prey.)" }, 
                { french: "Le cygne", english: "Swan", phonetic: "/luh seen/", englishExample: "Le cygne est élégant. (The swan is elegant.)" },
                { french: "Le dauphin", english: "Dolphin", phonetic: "/luh doh-fan/", englishExample: "Le dauphin est très intelligent. (The dolphin is very intelligent.)" }, 
                { french: "La baleine", english: "Whale", phonetic: "/la ba-len/", englishExample: "La baleine est énorme. (The whale is enormous.)" },
                { french: "Le requin", english: "Shark", phonetic: "/luh ruh-kan/", englishExample: "Le requin vit dans l'océan. (The shark lives in the ocean.)" }, 
                { french: "Le crabe", english: "Crab", phonetic: "/luh krab/", englishExample: "Le crabe marche de côté. (The crab walks sideways.)" },
                { french: "L'escargot (m)", english: "Snail", phonetic: "/les-kar-goh/", englishExample: "L'escargot est très lent. (The snail is very slow.)" }, 
                { french: "La crevette", english: "Shrimp", phonetic: "/la kruh-vet/", englishExample: "Je mange des crevettes. (I eat shrimp.)" },
                { french: "La méduse", english: "Jellyfish", phonetic: "/la may-dooz/", englishExample: "La méduse flotte dans l'eau. (The jellyfish floats in the water.)" }, 
                { french: "Le phoque", english: "Seal", phonetic: "/luh fok/", englishExample: "Le phoque aime le froid. (The seal likes the cold.)" },
                { french: "Le pingouin", english: "Penguin", phonetic: "/luh pan-gwan/", englishExample: "Le pingouin ne vole pas. (The penguin does not fly.)" }, 
                { french: "Le chameau", english: "Camel", phonetic: "/luh sha-moh/", englishExample: "Le chameau est dans le désert. (The camel is in the desert.)" },
                { french: "Le zèbre", english: "Zebra", phonetic: "/luh zebr/", englishExample: "Le zèbre a des rayures. (The zebra has stripes.)" }, 
                { french: "Le rhinocéros", english: "Rhinoceros", phonetic: "/luh ree-no-say-ros/", englishExample: "Le rhinocéros est grand. (The rhinoceros is big.)" },
                { french: "L'hippopotame (m)", english: "Hippopotamus", phonetic: "/lee-po-po-tam/", englishExample: "L'hippopotame aime l'eau. (The hippopotamus likes the water.)" }, 
                { french: "La panthère", english: "Panther", phonetic: "/la pan-ter/", englishExample: "La panthère est noire. (The panther is black.)" },
                { french: "Le flamant rose", english: "Flamingo", phonetic: "/luh fla-man rohz/", englishExample: "Le flamant rose est joli. (The flamingo is pretty.)" }, 
                { french: "Le raton laveur", english: "Raccoon", phonetic: "/luh ra-ton la-vur/", englishExample: "Le raton laveur lave sa nourriture. (The raccoon washes its food.)" },
                { french: "Le castor", english: "Beaver", phonetic: "/luh kas-tor/", englishExample: "Le castor construit un barrage. (The beaver builds a dam.)" }, 
                { french: "La marmotte", english: "Groundhog/Marmot", phonetic: "/la mar-mot/", englishExample: "La marmotte dort beaucoup. (The marmot sleeps a lot.)" },
                { french: "Le dromadaire", english: "Dromedary (camel)", phonetic: "/luh dro-ma-der/", englishExample: "Le dromadaire a une bosse. (The dromedary has one hump.)" }, 
                { french: "Le kangourou", english: "Kangaroo", phonetic: "/luh kahn-goo-roo/", englishExample: "Le kangourou saute loin. (The kangaroo jumps far.)" },
            ]},
        
            // --- ID 6: Colors & Adjectives (CORREGIDO: M/F separados cuando la forma cambia) ---
            { id: 6, title: "Colors & Adjectives", progressKey: "colors_adj", cards: [
                // Colores
                { french: "Rouge", english: "Red (m/f same)", phonetic: "/roozh/", englishExample: "J'ai un manteau rouge. (I have a red coat.)" }, 
                { french: "Bleu", english: "Blue (masculine)", phonetic: "/bluh/", englishExample: "Le ciel est bleu. (The sky is blue.)" },
                { french: "Bleue", english: "Blue (feminine)", phonetic: "/bluh/", englishExample: "La mer est bleue. (The sea is blue.)" },
                { french: "Vert", english: "Green (masculine)", phonetic: "/ver/", englishExample: "J'ai un pull vert. (I have a green sweater.)" }, 
                { french: "Verte", english: "Green (feminine)", phonetic: "/vert/", englishExample: "J'achète une pomme verte. (I am buying a green apple.)" }, 
                { french: "Jaune", english: "Yellow (m/f same)", phonetic: "/zhon/", englishExample: "Mon pull est jaune. (My sweater is yellow.)" }, 
                { french: "Noir", english: "Black (masculine)", phonetic: "/nwar/", englishExample: "J'ai un chien noir. (I have a black dog.)" },
                { french: "Noire", english: "Black (feminine)", phonetic: "/nwar/", englishExample: "J'ai une veste noire. (I have a black jacket.)" }, 
                { french: "Blanc", english: "White (masculine)", phonetic: "/blan/", englishExample: "Le mur est blanc. (The wall is white.)" },
                { french: "Blanche", english: "White (feminine)", phonetic: "/blansh/", englishExample: "Elle a une chemise blanche. (She has a white shirt.)" },
                { french: "Marron", english: "Brown (m/f same)", phonetic: "/ma-ron/", englishExample: "Les yeux marron. (Brown eyes.)" }, 
                { french: "Gris", english: "Gray (masculine)", phonetic: "/gree/", englishExample: "Le temps est gris aujourd'hui. (The weather is gray today.)" },
                { french: "Grise", english: "Gray (feminine)", phonetic: "/greez/", englishExample: "J'ai une souris grise. (I have a gray mouse.)" },
                { french: "Rose", english: "Pink (m/f same)", phonetic: "/rohz/", englishExample: "J'aime la couleur rose. (I like the pink color.)" },
                { french: "Violet", english: "Purple (masculine)", phonetic: "/vee-oh-lay/", englishExample: "C'est un vélo violet. (It's a purple bicycle.)" }, 
                { french: "Violette", english: "Purple (feminine)", phonetic: "/vee-oh-let/", englishExample: "C'est une robe violette. (It's a purple dress.)" },
                { french: "Orange", english: "Orange (m/f same)", phonetic: "/o-ronzh/", englishExample: "La voiture est orange. (The car is orange.)" },
                { french: "Argenté", english: "Silver (masculine)", phonetic: "/ar-zhan-tay/", englishExample: "J'ai un collier argenté. (I have a silver necklace.)" },
                { french: "Argentée", english: "Silver (feminine)", phonetic: "/ar-zhan-tay/", englishExample: "Une montre argentée. (A silver watch.)" },
                { french: "Doré", english: "Golden (masculine)", phonetic: "/doh-ray/", englishExample: "Le soleil est doré. (The sun is golden.)" },
                { french: "Dorée", english: "Golden (feminine)", phonetic: "/doh-ray/", englishExample: "Une médaille dorée. (A golden medal.)" },
                
                // Adjetivos
                { french: "Grand", english: "Tall / Big (masculine)", phonetic: "/grahn/", englishExample: "C'est un grand homme. (He is a big man.)" }, 
                { french: "Grande", english: "Tall / Big (feminine)", phonetic: "/grahnd/", englishExample: "C'est une grande ville. (It is a big city.)" }, 
                { french: "Petit", english: "Small / Short (masculine)", phonetic: "/puh-tee/", englishExample: "C'est un petit chien. (It is a small dog.)" },
                { french: "Petite", english: "Small / Short (feminine)", phonetic: "/puh-teet/", englishExample: "Elle est petite. (She is short.)" },
                { french: "Bon", english: "Good (masculine)", phonetic: "/bon/", englishExample: "C'est un bon vin. (It is a good wine.)" }, 
                { french: "Bonne", english: "Good (feminine)", phonetic: "/bun/", englishExample: "C'est une bonne idée. (It's a good idea.)" }, 
                { french: "Mauvais", english: "Bad (masculine)", phonetic: "/mo-veh/", englishExample: "C'est un mauvais film. (It's a bad movie.)" },
                { french: "Mauvaise", english: "Bad (feminine)", phonetic: "/mo-vez/", englishExample: "C'est une mauvaise nouvelle. (It's bad news.)" },
                { french: "Beau", english: "Beautiful (masculine)", phonetic: "/boh/", englishExample: "C'est un beau cadeau. (It is a beautiful gift.)" }, 
                { french: "Belle", english: "Beautiful (feminine)", phonetic: "/bel/", englishExample: "La tour est belle. (The tower is beautiful.)" }, 
                { french: "Joli", english: "Pretty (masculine)", phonetic: "/zho-lee/", englishExample: "C'est un joli jardin. (It is a pretty garden.)" },
                { french: "Jolie", english: "Pretty (feminine)", phonetic: "/zho-lee/", englishExample: "Elle est jolie. (She is pretty.)" },
                { french: "Laid", english: "Ugly (masculine)", phonetic: "/lay/", englishExample: "Ce bâtiment est laid. (This building is ugly.)" },
                { french: "Laide", english: "Ugly (feminine)", phonetic: "/led/", englishExample: "Cette couleur est laide. (This color is ugly.)" },
                { french: "Nouveau", english: "New (masculine)", phonetic: "/noo-voh/", englishExample: "J'ai un nouveau travail. (I have a new job.)" },
                { french: "Nouvelle", english: "New (feminine)", phonetic: "/noo-vel/", englishExample: "C'est une nouvelle voiture. (It is a new car.)" },
                { french: "Vieux", english: "Old (masculine)", phonetic: "/vyuh/", englishExample: "C'est un vieux livre. (It's an old book.)" },
                { french: "Vieille", english: "Old (feminine)", phonetic: "/vyey/", englishExample: "C'est une vieille chanson. (It's an old song.)" },
                { french: "Jeune", english: "Young (m/f same)", phonetic: "/zhuhn/", englishExample: "Il est très jeune. (He is very young.)" },
                { french: "Cher", english: "Expensive (masculine)", phonetic: "/sher/", englishExample: "Ce téléphone est cher. (This phone is expensive.)" },
                { french: "Chère", english: "Expensive (feminine)", phonetic: "/sher/", englishExample: "Cette voiture est chère. (This car is expensive.)" },
                { french: "Bon marché", english: "Inexpensive / cheap (m/f same)", phonetic: "/bon mar-shay/", englishExample: "C'est bon marché. (It is cheap.)" },
                { french: "Facile", english: "Easy (m/f same)", phonetic: "/fah-seel/", englishExample: "C'est facile! (It is easy!)" }, 
                { french: "Difficile", english: "Difficult (m/f same)", phonetic: "/dee-fee-seel/", englishExample: "C'est difficile à comprendre. (It is difficult to understand.)" },
                { french: "Rapide", english: "Fast / Quick (m/f same)", phonetic: "/ra-peed/", englishExample: "Le train est rapide. (The train is fast.)" },
                { french: "Lent", english: "Slow (masculine)", phonetic: "/lon/", englishExample: "C'est un mouvement lent. (It is a slow movement.)" },
                { french: "Lente", english: "Slow (feminine)", phonetic: "/lont/", englishExample: "La tortue est lente. (The turtle is slow.)" },
                { french: "Fort", english: "Strong / Loud (masculine)", phonetic: "/for/", englishExample: "Il est très fort. (He is very strong.)" },
                { french: "Forte", english: "Strong / Loud (feminine)", phonetic: "/fort/", englishExample: "Elle a une voix forte. (She has a loud voice.)" },
                { french: "Faible", english: "Weak (m/f same)", phonetic: "/febl/", englishExample: "Mon signal est faible. (My signal is weak.)" },
                { french: "Gros", english: "Big / Fat (masculine)", phonetic: "/groh/", englishExample: "C'est un gros problème. (It is a big problem.)" },
                { french: "Grosse", english: "Big / Fat (feminine)", phonetic: "/grohs/", englishExample: "Une grosse erreur. (A big mistake.)" },
                { french: "Mince", english: "Thin / Slim (m/f same)", phonetic: "/manss/", englishExample: "Elle est très mince. (She is very thin.)" },
                { french: "Content", english: "Happy (masculine)", phonetic: "/kon-ton/", englishExample: "Il est content de son cadeau. (He is happy with his gift.)" },
                { french: "Contente", english: "Happy (feminine)", phonetic: "/kon-tont/", englishExample: "Elle est contente de te voir. (She is happy to see you.)" },
                { french: "Triste", english: "Sad (m/f same)", phonetic: "/treest/", englishExample: "Je suis triste aujourd'hui. (I am sad today.)" },
                { french: "Fatigué", english: "Tired (masculine)", phonetic: "/fa-tee-gay/", englishExample: "Je suis fatigué. (I am tired.)" },
                { french: "Fatiguée", english: "Tired (feminine)", phonetic: "/fa-tee-gay/", englishExample: "Elle est fatiguée. (She is tired.)" },
                { french: "Propre", english: "Clean (m/f same)", phonetic: "/propr/", englishExample: "La chambre est propre. (The room is clean.)" },
                { french: "Sale", english: "Dirty (m/f same)", phonetic: "/sal/", englishExample: "Mes mains sont sales. (My hands are dirty.)" },
                { french: "Froid", english: "Cold (masculine)", phonetic: "/frwa/", englishExample: "Il fait froid. (It is cold.)" },
                { french: "Froide", english: "Cold (feminine)", phonetic: "/frwad/", englishExample: "L'eau est froide. (The water is cold.)" },
                { french: "Chaud", english: "Hot (masculine)", phonetic: "/shoh/", englishExample: "Le café est chaud. (The coffee is hot.)" },
                { french: "Chaude", english: "Hot (feminine)", phonetic: "/shohd/", englishExample: "La soupe est chaude. (The soup is hot.)" },
                { french: "Intéressant", english: "Interesting (masculine)", phonetic: "/an-tay-ray-san/", englishExample: "C'est un livre intéressant. (It's an interesting book.)" },
                { french: "Intéressante", english: "Interesting (feminine)", phonetic: "/an-tay-ray-sant/", englishExample: "C'est une idée intéressante. (It's an interesting idea.)" },
            ]},
            
            // --- ID 7: Food & Drink (CORREGIDO: TODOS CON EJEMPLOS) ---
            { id: 7, title: "Food & Drink", progressKey: "food_drink", cards: [
                { french: "Le pain", english: "Bread", phonetic: "/luh pan/", englishExample: "Je voudrais du pain. (I would like some bread.)" },
                { french: "Le croissant", english: "Croissant", phonetic: "/luh krwa-san/", englishExample: "Un croissant et un café. (A croissant and a coffee.)" },
                { french: "Le beurre", english: "Butter", phonetic: "/luh bur/", englishExample: "Du beurre sur mon pain. (Butter on my bread.)" },
                { french: "Le sucre", english: "Sugar", phonetic: "/luh sookr/", englishExample: "Pas de sucre, merci. (No sugar, thank you.)" },
                { french: "Le sel", english: "Salt", phonetic: "/luh sel/", englishExample: "Ajoutez du sel. (Add some salt.)" },
                { french: "Le poivre", english: "Pepper", phonetic: "/luh pwavr/", englishExample: "Un peu de poivre. (A little pepper.)" },
                { french: "Le fromage", english: "Cheese", phonetic: "/luh fro-mazh/", englishExample: "J'aime le fromage. (I like cheese.)" },
                { french: "Le riz", english: "Rice", phonetic: "/luh ree/", englishExample: "Je mange du riz. (I am eating rice.)" },
                { french: "Les pâtes (f. pl)", english: "Pasta", phonetic: "/lay pat/", englishExample: "Des pâtes à la sauce tomate. (Pasta with tomato sauce.)" },
                { french: "La viande", english: "Meat", phonetic: "/la vyand/", englishExample: "Je ne mange pas de viande. (I don't eat meat.)" },
                { french: "Le poulet", english: "Chicken", phonetic: "/luh poo-lay/", englishExample: "Un poulet rôti. (A roasted chicken.)" },
                { french: "Le bœuf", english: "Beef", phonetic: "/luh buf/", englishExample: "Un steak de bœuf. (A beef steak.)" },
                { french: "Le poisson", english: "Fish", phonetic: "/luh pwa-son/", englishExample: "Je mange du poisson. (I eat fish.)" },
                { french: "Les œufs (m. pl)", english: "Eggs", phonetic: "/lay zuh/", englishExample: "Deux œufs pour le petit-déjeuner. (Two eggs for breakfast.)" },
                { french: "La pomme", english: "Apple", phonetic: "/la pom/", englishExample: "Une pomme verte. (A green apple.)" },
                { french: "La banane", english: "Banana", phonetic: "/la ba-nan/", englishExample: "La banane est jaune. (The banana is yellow.)" },
                { french: "L'orange (f)", english: "Orange", phonetic: "/loh-ranzh/", englishExample: "J'aime les oranges. (I like oranges.)" },
                { french: "La fraise", english: "Strawberry", phonetic: "/la frez/", englishExample: "J'aime les fraises. (I like strawberries.)" },
                { french: "Le légume", english: "Vegetable", phonetic: "/luh lay-goom/", englishExample: "Mangez vos légumes. (Eat your vegetables.)" },
                { french: "Le fruit", english: "Fruit", phonetic: "/luh frwee/", englishExample: "Quel est ton fruit préféré? (What is your favorite fruit?)" },
                { french: "La pomme de terre", english: "Potato", phonetic: "/la pom duh ter/", englishExample: "Des frites (chips) de pommes de terre. (Potato chips.)" },
                { french: "La salade", english: "Salad / Lettuce", phonetic: "/la sa-lad/", englishExample: "Une salade verte. (A green salad.)" },
                { french: "La soupe", english: "Soup", phonetic: "/la soop/", englishExample: "De la soupe chaude. (Hot soup.)" },
                { french: "Le dessert", english: "Dessert", phonetic: "/luh day-ser/", englishExample: "Quel dessert voulez-vous? (What dessert do you want?)" },
                { french: "Le petit déjeuner", english: "Breakfast", phonetic: "/luh puh-tee day-zhuh-nay/", englishExample: "Je prends le petit déjeuner à 8h. (I have breakfast at 8am.)" },
                { french: "Le déjeuner", english: "Lunch", phonetic: "/luh day-zhuh-nay/", englishExample: "Le déjeuner est à midi. (Lunch is at noon.)" },
                { french: "Le dîner", english: "Dinner", phonetic: "/luh dee-nay/", englishExample: "Le dîner est prêt. (Dinner is ready.)" },
                { french: "L'eau (f)", english: "Water", phonetic: "/loh/", englishExample: "Un verre d'eau, s'il vous plaît. (A glass of water, please.)" },
                { french: "Le café", english: "Coffee", phonetic: "/luh ka-fay/", englishExample: "Un café noir. (A black coffee.)" },
                { french: "Le thé", english: "Tea", phonetic: "/luh tay/", englishExample: "Je bois du thé vert. (I drink green tea.)" },
                { french: "Le lait", english: "Milk", phonetic: "/luh lay/", englishExample: "Du lait dans mon café. (Milk in my coffee.)" },
                { french: "Le jus", english: "Juice", phonetic: "/luh zhoo/", englishExample: "Un jus de pomme. (An apple juice.)" },
                { french: "La bière", english: "Beer", phonetic: "/la byer/", englishExample: "Une bière fraîche. (A cold beer.)" },
                { french: "Le vin", english: "Wine", phonetic: "/luh van/", englishExample: "Un verre de vin rouge. (A glass of red wine.)" },
                { french: "Le jus d'orange", english: "Orange juice", phonetic: "/luh zhoo doh-ranzh/", englishExample: "J'aime le jus d'orange. (I like orange juice.)" },
                { french: "Une bouteille", english: "A bottle", phonetic: "/oon boo-tey/", englishExample: "Une bouteille de vin. (A bottle of wine.)" },
                { french: "Un verre", english: "A glass", phonetic: "/uh ver/", englishExample: "Donnez-moi un verre. (Give me a glass.)" },
                { french: "Une tasse", english: "A cup / A mug", phonetic: "/oon tass/", englishExample: "Une tasse de thé. (A cup of tea.)" },
                { french: "J'ai faim", english: "I am hungry (I have hunger)", phonetic: "/zheh fan/", englishExample: "Je vais manger, j'ai faim. (I am going to eat, I am hungry.)" },
                { french: "J'ai soif", english: "I am thirsty (I have thirst)", phonetic: "/zheh swaf/", englishExample: "J'ai soif, je bois de l'eau. (I'm thirsty, I'm drinking water.)" },
                { french: "C'est piquant", english: "It is spicy", phonetic: "/say pee-kon/", englishExample: "Ce plat est trop piquant. (This dish is too spicy.)" },
                { french: "Sucré", english: "Sweet", phonetic: "/soo-kray/", englishExample: "Ce gâteau est très sucré. (This cake is very sweet.)" },
                { french: "Salé", english: "Salty", phonetic: "/sa-lay/", englishExample: "C'est un peu trop salé. (It is a little too salty.)" },
                { french: "Acide", english: "Sour", phonetic: "/a-seed/", englishExample: "Le citron est acide. (The lemon is sour.)" },
            ]},
        
            // --- ID 8: Time & Dates (CORREGIDO: TODOS CON EJEMPLOS) ---
            { id: 8, title: "Time & Dates", progressKey: "time_dates", cards: [
                { french: "L'heure (f)", english: "The time / The hour", phonetic: "/lur/", englishExample: "Quelle heure est-il? (What time is it?)" },
                { french: "Le jour", english: "The day", phonetic: "/luh zhoor/", englishExample: "C'est le jour de fête. (It is the holiday.)" },
                { french: "La semaine", english: "The week", phonetic: "/la suh-men/", englishExample: "Je pars la semaine prochaine. (I'm leaving next week.)" },
                { french: "Le mois", english: "The month", phonetic: "/luh mwa/", englishExample: "Quel mois sommes-nous? (What month are we in?)" },
                { french: "L'année (f)", english: "The year", phonetic: "/la-nay/", englishExample: "Bonne année! (Happy new year!)" },
                { french: "Hier", english: "Yesterday", phonetic: "/yer/", englishExample: "J'ai travaillé hier. (I worked yesterday.)" },
                { french: "Aujourd'hui", english: "Today", phonetic: "/oh-zhoor-dwee/", englishExample: "Aujourd'hui, c'est lundi. (Today is Monday.)" },
                { french: "Demain", english: "Tomorrow", phonetic: "/duh-man/", englishExample: "À demain! (See you tomorrow!)" },
                { french: "Le matin", english: "The morning", phonetic: "/luh ma-tan/", englishExample: "Je me lève le matin. (I get up in the morning.)" },
                { french: "L'après-midi (m/f)", english: "The afternoon", phonetic: "/la-preh-mee-dee/", englishExample: "Je travaille l'après-midi. (I work in the afternoon.)" },
                { french: "Le soir", english: "The evening", phonetic: "/luh swar/", englishExample: "Nous regardons la télévision le soir. (We watch TV in the evening.)" },
                { french: "Minuit", english: "Midnight", phonetic: "/mee-nwee/", englishExample: "Il est minuit. (It is midnight.)" },
                { french: "Midi", english: "Noon", phonetic: "/mee-dee/", englishExample: "C'est l'heure de midi. (It is noon time.)" },
                { french: "Maintenant", english: "Now", phonetic: "/mant-non/", englishExample: "Je pars maintenant. (I'm leaving now.)" },
                { french: "Plus tard", english: "Later", phonetic: "/ploo tar/", englishExample: "Je le ferai plus tard. (I will do it later.)" },
                { french: "Lundi", english: "Monday", phonetic: "/lun-dee/", englishExample: "Le magasin est fermé le lundi. (The store is closed on Monday.)" },
                { french: "Mardi", english: "Tuesday", phonetic: "/mar-dee/", englishExample: "Je suis libre mardi. (I am free on Tuesday.)" },
                { french: "Mercredi", english: "Wednesday", phonetic: "/mer-kruh-dee/", englishExample: "Mercredi, c'est le milieu de la semaine. (Wednesday is the middle of the week.)" },
                { french: "Jeudi", english: "Thursday", phonetic: "/zhuh-dee/", englishExample: "La réunion est jeudi. (The meeting is on Thursday.)" },
                { french: "Vendredi", english: "Friday", phonetic: "/van-druh-dee/", englishExample: "C'est vendredi soir. (It is Friday evening.)" },
                { french: "Samedi", english: "Saturday", phonetic: "/sam-dee/", englishExample: "Je me repose samedi. (I rest on Saturday.)" },
                { french: "Dimanche", english: "Sunday", phonetic: "/dee-mansh/", englishExample: "Le dimanche est mon jour préféré. (Sunday is my favorite day.)" },
                { french: "Janvier", english: "January", phonetic: "/zhan-vee-ay/", englishExample: "C'est l'hiver en janvier. (It is winter in January.)" },
                { french: "Décembre", english: "December", phonetic: "/day-sombr/", englishExample: "Noël est en décembre. (Christmas is in December.)" },
            ]},
        
            // --- ID 9: House & Home (CORREGIDO: TODOS CON EJEMPLOS) ---
            { id: 9, title: "House & Home", progressKey: "house_home", cards: [
                { french: "La maison", english: "The house", phonetic: "/la may-zon/", englishExample: "Je suis à la maison. (I am at home.)" },
                { french: "L'appartement (m)", english: "The apartment", phonetic: "/la-par-tuh-mon/", englishExample: "Mon appartement est petit. (My apartment is small.)" },
                { french: "La chambre", english: "The room / The bedroom", phonetic: "/la shambr/", englishExample: "Je dors dans ma chambre. (I sleep in my room.)" },
                { french: "La cuisine", english: "The kitchen", phonetic: "/la kwee-zeen/", englishExample: "Je cuisine dans la cuisine. (I cook in the kitchen.)" },
                { french: "Le salon", english: "The living room", phonetic: "/luh sa-lon/", englishExample: "Regardons la télé dans le salon. (Let's watch TV in the living room.)" },
                { french: "La salle de bain", english: "The bathroom", phonetic: "/la sal duh ban/", englishExample: "Où est la salle de bain? (Where is the bathroom?)" },
                { french: "La douche", english: "The shower", phonetic: "/la doosh/", englishExample: "Je prends une douche. (I take a shower.)" },
                { french: "Les toilettes (f. pl)", english: "The toilet / Restroom", phonetic: "/lay twa-let/", englishExample: "Où sont les toilettes? (Where is the restroom?)" },
                { french: "Le jardin", english: "The garden", phonetic: "/luh zhar-dan/", englishExample: "J'ai un petit jardin. (I have a small garden.)" },
                { french: "La porte", english: "The door", phonetic: "/la port/", englishExample: "Fermez la porte. (Close the door.)" },
                { french: "La fenêtre", english: "The window", phonetic: "/la fuh-netr/", englishExample: "Ouvrez la fenêtre, s'il vous plaît. (Open the window, please.)" },
                { french: "Le mur", english: "The wall", phonetic: "/luh moor/", englishExample: "Le mur est blanc. (The wall is white.)" },
                { french: "Le lit", english: "The bed", phonetic: "/luh lee/", englishExample: "Je vais au lit. (I am going to bed.)" },
                { french: "La table", english: "The table", phonetic: "/la tabl/", englishExample: "Mangeons à table. (Let's eat at the table.)" },
                { french: "La chaise", english: "The chair", phonetic: "/la shez/", englishExample: "Asseyez-vous sur la chaise. (Sit on the chair.)" },
                { french: "La lumière", english: "The light", phonetic: "/la loo-myer/", englishExample: "Allumez la lumière. (Turn on the light.)" },
                { french: "Le téléphone", english: "The telephone", phonetic: "/luh tay-lay-fon/", englishExample: "Mon téléphone est cassé. (My phone is broken.)" },
                { french: "La clé", english: "The key", phonetic: "/la klay/", englishExample: "Où est ma clé? (Where is my key?)" },
            ]},
        
            // --- ID 10: Body & Health (CORREGIDO: TODOS CON EJEMPLOS) ---
            { id: 10, title: "Body & Health", progressKey: "body_health", cards: [
                { french: "Le corps", english: "The body", phonetic: "/luh kor/", englishExample: "Prends soin de ton corps. (Take care of your body.)" },
                { french: "La tête", english: "The head", phonetic: "/la tet/", englishExample: "J'ai mal à la tête. (I have a headache.)" },
                { french: "Les cheveux (m. pl)", english: "The hair", phonetic: "/lay shuh-vuh/", englishExample: "Elle a de longs cheveux. (She has long hair.)" },
                { french: "Le visage", english: "The face", phonetic: "/luh vee-zazh/", englishExample: "Lave ton visage. (Wash your face.)" },
                { french: "L'œil (m) / Les yeux (m. pl)", english: "The eye / The eyes", phonetic: "/luy / lay zyuh/", englishExample: "Elle a les yeux bleus. (She has blue eyes.)" },
                { french: "L'oreille (f)", english: "The ear", phonetic: "/loh-rey/", englishExample: "J'ai mal à l'oreille. (I have an earache.)" },
                { french: "Le nez", english: "The nose", phonetic: "/luh nay/", englishExample: "J'ai un petit nez. (I have a small nose.)" },
                { french: "La bouche", english: "The mouth", phonetic: "/la boosh/", englishExample: "Ouvre la bouche. (Open your mouth.)" },
                { french: "La dent", english: "The tooth", phonetic: "/la don/", englishExample: "J'ai mal aux dents. (I have a toothache.)" },
                { french: "Le bras", english: "The arm", phonetic: "/luh brah/", englishExample: "Il a le bras cassé. (He has a broken arm.)" },
                { french: "La main", english: "The hand", phonetic: "/la man/", englishExample: "Donne-moi ta main. (Give me your hand.)" },
                { french: "Le doigt", english: "The finger", phonetic: "/luh dwah/", englishExample: "J'ai cinq doigts. (I have five fingers.)" },
                { french: "La jambe", english: "The leg", phonetic: "/la zhamb/", englishExample: "J'ai les jambes fatiguées. (I have tired legs.)" },
                { french: "Le pied", english: "The foot", phonetic: "/luh pyay/", englishExample: "Je marche avec mes pieds. (I walk with my feet.)" },
                { french: "Le cœur", english: "The heart", phonetic: "/luh kur/", englishExample: "Mon cœur bat vite. (My heart is beating fast.)" },
                { french: "La maladie", english: "The illness / Sickness", phonetic: "/la ma-la-dee/", englishExample: "C'est une maladie grave. (It is a serious illness.)" },
                { french: "J'ai mal", english: "I hurt / I have pain", phonetic: "/zheh mal/", englishExample: "J'ai mal à la gorge. (I have a sore throat.)" },
                { french: "Le docteur (le médecin)", english: "The doctor", phonetic: "/luh dok-tur (luh met-san)/", englishExample: "J'appelle le médecin. (I am calling the doctor.)" },
                { french: "L'hôpital (m)", english: "The hospital", phonetic: "/loh-pee-tal/", englishExample: "Je vais à l'hôpital. (I am going to the hospital.)" },
            ]},

            // --- ID 11: Family Members (NUEVA LECCIÓN) ---
            { id: 11, title: "Family Members", progressKey: "family_members", cards: [
                { french: "La famille", english: "The family", phonetic: "/la fa-mee/", englishExample: "J'aime ma famille. (I love my family.)" },
                { french: "Le père", english: "The father", phonetic: "/luh per/", englishExample: "Mon père travaille beaucoup. (My father works a lot.)" },
                { french: "La mère", english: "The mother", phonetic: "/la mer/", englishExample: "Ma mère cuisine bien. (My mother cooks well.)" },
                { french: "Le fils", english: "The son", phonetic: "/luh feess/", englishExample: "C'est mon fils aîné. (He is my eldest son.)" },
                { french: "La fille", english: "The daughter", phonetic: "/la fee/", englishExample: "Elle est notre fille. (She is our daughter.)" },
                { french: "Le frère", english: "The brother", phonetic: "/luh frer/", englishExample: "J'ai un grand frère. (I have an older brother.)" },
                { french: "La sœur", english: "The sister", phonetic: "/la sur/", englishExample: "Ma sœur habite à Paris. (My sister lives in Paris.)" },
                { french: "Les parents (m. pl)", english: "The parents", phonetic: "/lay pa-ron/", englishExample: "Mes parents sont gentils. (My parents are kind.)" },
                { french: "Le grand-père", english: "The grandfather", phonetic: "/luh gran-per/", englishExample: "Mon grand-père est vieux. (My grandfather is old.)" },
                { french: "La grand-mère", english: "The grandmother", phonetic: "/la gran-mer/", englishExample: "Ma grand-mère raconte des histoires. (My grandmother tells stories.)" },
                { french: "Les grands-parents", english: "The grandparents", phonetic: "/lay gran-pa-ron/", englishExample: "J'adore mes grands-parents. (I love my grandparents.)" },
                { french: "Le petit-fils", english: "The grandson", phonetic: "/luh puh-tee feess/", englishExample: "C'est mon petit-fils. (He is my grandson.)" },
                { french: "La petite-fille", english: "The granddaughter", phonetic: "/la puh-teet fee/", englishExample: "J'ai une petite-fille. (I have a granddaughter.)" },
                { french: "L'oncle (m)", english: "The uncle", phonetic: "/lon-kl/", englishExample: "Mon oncle vient nous voir. (My uncle is coming to see us.)" },
                { french: "La tante", english: "The aunt", phonetic: "/la tant/", englishExample: "Ma tante est très drôle. (My aunt is very funny.)" },
                { french: "Le cousin", english: "The cousin (male)", phonetic: "/luh koo-zan/", englishExample: "Mon cousin est étudiant. (My cousin is a student.)" },
                { french: "La cousine", english: "The cousin (female)", phonetic: "/la koo-zeen/", englishExample: "Sa cousine est arrivée. (His/Her cousin arrived.)" },
                { french: "Le neveu", english: "The nephew", phonetic: "/luh nuh-vuh/", englishExample: "Il est mon neveu. (He is my nephew.)" },
                { french: "La nièce", english: "The niece", phonetic: "/la nyehs/", englishExample: "C'est ma nièce. (She is my niece.)" },
                { french: "L'époux (m)", english: "The husband (formal)", phonetic: "/lay-poo/", englishExample: "Mon époux est avocat. (My husband is a lawyer.)" },
                { french: "L'épouse (f)", english: "The wife (formal)", phonetic: "/lay-pooz/", englishExample: "Mon épouse est partie. (My wife left.)" },
                { french: "Le mari", english: "The husband (common)", phonetic: "/luh ma-ree/", englishExample: "Elle est avec son mari. (She is with her husband.)" },
                { french: "La femme", english: "The wife (common)", phonetic: "/la fam/", englishExample: "Ma femme m'attend. (My wife is waiting for me.)" },
                { french: "Le beau-père", english: "Father-in-law / Stepfather", phonetic: "/luh boh-per/", englishExample: "Mon beau-père est sympa. (My father-in-law is nice.)" },
                { french: "La belle-mère", english: "Mother-in-law / Stepmother", phonetic: "/la bel-mer/", englishExample: "Ma belle-mère vient déjeuner. (My mother-in-law is coming for lunch.)" },
                { french: "Le beau-frère", english: "Brother-in-law", phonetic: "/luh boh-frer/", englishExample: "Mon beau-frère est marié. (My brother-in-law is married.)" },
                { french: "La belle-sœur", english: "Sister-in-law", phonetic: "/la bel-sur/", englishExample: "J'ai une belle-sœur. (I have a sister-in-law.)" },
                { french: "Le petit ami", english: "The boyfriend", phonetic: "/luh puh-tee ta-mee/", englishExample: "C'est mon petit ami. (He is my boyfriend.)" },
                { french: "La petite amie", english: "The girlfriend", phonetic: "/la puh-teet ta-mee/", englishExample: "Ma petite amie est géniale. (My girlfriend is great.)" },
            ]},
        
            // --- ID 12: Countries (NUEVA LECCIÓN - Enfoque específico al inicio) ---
            { id: 12, title: "Countries", progressKey: "countries", cards: [
                { french: "L'Équateur (m)", english: "Ecuador", phonetic: "/lay-kwa-tur/", englishExample: "La capitale de l'Équateur est Quito. (The capital of Ecuador is Quito.)" },
                { french: "Le Mexique", english: "Mexico", phonetic: "/luh mek-seek/", englishExample: "Je visite le Mexique. (I am visiting Mexico.)" },
                { french: "Le Népal", english: "Nepal", phonetic: "/luh nay-pal/", englishExample: "Le Népal a de hautes montagnes. (Nepal has high mountains.)" },
                { french: "Le Maroc", english: "Morocco", phonetic: "/luh ma-rok/", englishExample: "Le Maroc est en Afrique. (Morocco is in Africa.)" },
                { french: "La France", english: "France", phonetic: "/la frons/", englishExample: "Je parle français en France. (I speak French in France.)" },
                { french: "Le Canada", english: "Canada", phonetic: "/luh ka-na-da/", englishExample: "Le Canada est très grand. (Canada is very large.)" },
                { french: "Les États-Unis (m. pl)", english: "The United States", phonetic: "/lay zay-ta-zoo-nee/", englishExample: "J'ai voyagé aux États-Unis. (I traveled to the United States.)" },
                { french: "Le Royaume-Uni", english: "The United Kingdom", phonetic: "/luh rwa-yohm oo-nee/", englishExample: "Londres est au Royaume-Uni. (London is in the United Kingdom.)" },
                { french: "L'Allemagne (f)", english: "Germany", phonetic: "/lal-mañ/", englishExample: "J'apprends l'allemand. (I am learning German.)" },
                { french: "L'Espagne (f)", english: "Spain", phonetic: "/les-pañ/", englishExample: "J'aime l'Espagne. (I like Spain.)" },
                { french: "L'Italie (f)", english: "Italy", phonetic: "/lee-ta-lee/", englishExample: "La nourriture en Italie est délicieuse. (The food in Italy is delicious.)" },
                { french: "La Chine", english: "China", phonetic: "/la sheen/", englishExample: "La Chine est un grand pays. (China is a large country.)" },
                { french: "L'Inde (f)", english: "India", phonetic: "/land/", englishExample: "Il y a beaucoup de monde en Inde. (There are many people in India.)" },
                { french: "Le Brésil", english: "Brazil", phonetic: "/luh bre-zeel/", englishExample: "Le Brésil est connu pour le football. (Brazil is known for football.)" },
                { french: "L'Argentine (f)", english: "Argentina", phonetic: "/lar-zhan-teen/", englishExample: "J'ai des amis en Argentine. (I have friends in Argentina.)" },
                { french: "L'Australie (f)", english: "Australia", phonetic: "/los-tra-lee/", englishExample: "L'Australie est une île. (Australia is an island.)" },
                { french: "Le Japon", english: "Japan", phonetic: "/luh zha-pon/", englishExample: "J'étudie le japonais. (I am studying Japanese.)" },
                { french: "La Corée du Sud", english: "South Korea", phonetic: "/la ko-ray doo sud/", englishExample: "J'adore la culture en Corée du Sud. (I love the culture in South Korea.)" },
                { french: "La Russie", english: "Russia", phonetic: "/la roo-see/", englishExample: "La Russie est un pays froid. (Russia is a cold country.)" },
                { french: "L'Égypte (f)", english: "Egypt", phonetic: "/lay-zheept/", englishExample: "Les pyramides sont en Égypte. (The pyramids are in Egypt.)" },
                { french: "La Colombie", english: "Colombia", phonetic: "/la ko-lon-bee/", englishExample: "Je suis d'origine colombienne. (I am of Colombian origin.)" },
                { french: "Le Pérou", english: "Peru", phonetic: "/luh pay-roo/", englishExample: "Le Pérou est en Amérique du Sud. (Peru is in South America.)" },
                { french: "Le Chili", english: "Chile", phonetic: "/luh shee-lee/", englishExample: "Le Chili est un pays long. (Chile is a long country.)" },
                { french: "Le Venezuela", english: "Venezuela", phonetic: "/luh vay-nay-zwe-la/", englishExample: "J'ai de la famille au Venezuela. (I have family in Venezuela.)" },
                { french: "L'Uruguay (m)", english: "Uruguay", phonetic: "/loo-roo-gway/", englishExample: "L'Uruguay est un petit pays. (Uruguay is a small country.)" },
                { french: "La Bolivie", english: "Bolivia", phonetic: "/la boh-lee-vee/", englishExample: "La Bolivie a deux capitales. (Bolivia has two capitals.)" },
                { french: "Cuba (f)", english: "Cuba", phonetic: "/koo-ba/", englishExample: "Il fait chaud à Cuba. (It is hot in Cuba.)" },
                { french: "Haïti (f)", english: "Haiti", phonetic: "/a-ee-tee/", englishExample: "Haïti est une île des Caraïbes. (Haiti is a Caribbean island.)" },
                { french: "Le Kenya", english: "Kenya", phonetic: "/luh kay-nya/", englishExample: "Je rêve de faire un safari au Kenya. (I dream of doing a safari in Kenya.)" },
                { french: "L'Afrique du Sud (f)", english: "South Africa", phonetic: "/la-freek doo sud/", englishExample: "L'Afrique du Sud est au sud. (South Africa is in the South.)" },
                { french: "Le Nigéria", english: "Nigeria", phonetic: "/luh nee-zhay-rya/", englishExample: "Le Nigéria est très peuplé. (Nigeria is very populated.)" },
                { french: "Le Sénégal", english: "Senegal", phonetic: "/luh say-nay-gal/", englishExample: "Le Sénégal est connu pour sa musique. (Senegal is known for its music.)" },
                { french: "L'Algérie (f)", english: "Algeria", phonetic: "/lal-zheh-ree/", englishExample: "L'Algérie est un grand pays. (Algeria is a large country.)" },
                { french: "La Turquie", english: "Turkey", phonetic: "/la toor-kee/", englishExample: "La Turquie est entre l'Europe et l'Asie. (Turkey is between Europe and Asia.)" },
                { french: "La Grèce", english: "Greece", phonetic: "/la grees/", englishExample: "La Grèce est célèbre pour son histoire. (Greece is famous for its history.)" },
                { french: "La Suède", english: "Sweden", phonetic: "/la swehd/", englishExample: "Il fait froid en Suède. (It is cold in Sweden.)" },
                { french: "La Norvège", english: "Norway", phonetic: "/la nor-vezh/", englishExample: "La Norvège est célèbre pour ses fjords. (Norway is famous for its fjords.)" },
                { french: "Le Portugal", english: "Portugal", phonetic: "/luh por-too-gal/", englishExample: "J'ai visité le Portugal. (I visited Portugal.)" },
                { french: "L'Irlande (f)", english: "Ireland", phonetic: "/leer-lond/", englishExample: "L'Irlande est très verte. (Ireland is very green.)" },
                { french: "La Pologne", english: "Poland", phonetic: "/la po-lonñ/", englishExample: "J'ai des amis en Pologne. (I have friends in Poland.)" },
                { french: "La Hongrie", english: "Hungary", phonetic: "/la hon-gree/", englishExample: "La Hongrie est en Europe centrale. (Hungary is in Central Europe.)" },
                { french: "La Thaïlande", english: "Thailand", phonetic: "/la ta-ee-lond/", englishExample: "Il fait très chaud en Thaïlande. (It is very hot in Thailand.)" },
                { french: "Le Vietnam", english: "Vietnam", phonetic: "/luh vyet-nam/", englishExample: "Le Vietnam est en Asie du Sud-Est. (Vietnam is in Southeast Asia.)" },
                { french: "La Nouvelle-Zélande", english: "New Zealand", phonetic: "/la noo-vel zay-lond/", englishExample: "J'aimerais visiter la Nouvelle-Zélande. (I would like to visit New Zealand.)" },
                { french: "Les Philippines (f. pl)", english: "The Philippines", phonetic: "/lay fee-lee-peen/", englishExample: "Les Philippines sont un archipel. (The Philippines are an archipelago.)" },
            ]},
        
            // --- ID 13: Clothing & Seasons (NUEVA LECCIÓN) ---
            { id: 13, title: "Clothing & Seasons", progressKey: "clothing_seasons", cards: [
                { french: "Les vêtements (m. pl)", english: "Clothes", phonetic: "/lay vet-mon/", englishExample: "Je mets mes vêtements. (I put on my clothes.)" },
                { french: "La chemise", english: "Shirt (collared)", phonetic: "/la shuh-meez/", englishExample: "Une chemise blanche. (A white shirt.)" },
                { french: "Le T-shirt", english: "T-shirt", phonetic: "/luh tee-shurt/", englishExample: "J'achète un T-shirt bleu. (I am buying a blue T-shirt.)" },
                { french: "Le pull", english: "Sweater / Jumper", phonetic: "/luh pool/", englishExample: "Mon pull est chaud. (My sweater is warm.)" },
                { french: "La veste", english: "Jacket", phonetic: "/la vest/", englishExample: "Mets ta veste. (Put on your jacket.)" },
                { french: "Le manteau", english: "Coat", phonetic: "/luh man-toh/", englishExample: "Un lourd manteau d'hiver. (A heavy winter coat.)" },
                { french: "Le pantalon", english: "Trousers / Pants", phonetic: "/luh pan-ta-lon/", englishExample: "Un pantalon noir. (Black trousers.)" },
                { french: "Le jean", english: "Jeans", phonetic: "/luh zheen/", englishExample: "J'ai un nouveau jean. (I have new jeans.)" },
                { french: "La robe", english: "Dress", phonetic: "/la rob/", englishExample: "Elle porte une robe rouge. (She is wearing a red dress.)" },
                { french: "La jupe", english: "Skirt", phonetic: "/la zhoop/", englishExample: "Ma jupe est courte. (My skirt is short.)" },
                { french: "Le short", english: "Shorts", phonetic: "/luh short/", englishExample: "Je mets un short l'été. (I wear shorts in summer.)" },
                { french: "Le maillot de bain", english: "Swimsuit / Bathing suit", phonetic: "/luh ma-yoh duh ban/", englishExample: "N'oublie pas ton maillot de bain. (Don't forget your swimsuit.)" },
                { french: "Les chaussettes (f. pl)", english: "Socks", phonetic: "/lay shoh-set/", englishExample: "J'ai perdu une chaussette. (I lost a sock.)" },
                { french: "Les sous-vêtements (m. pl)", english: "Underwear", phonetic: "/lay soo-vet-mon/", englishExample: "Acheter des sous-vêtements. (To buy underwear.)" },
                { french: "Le soutien-gorge", english: "Bra", phonetic: "/luh soo-tyan gorzh/", englishExample: "Un soutien-gorge confortable. (A comfortable bra.)" },
                { french: "Le slip", english: "Underpants / Briefs", phonetic: "/luh sleep/", englishExample: "Un nouveau slip. (New underpants.)" },
                { french: "Les chaussures (f. pl)", english: "Shoes", phonetic: "/lay shoh-sur/", englishExample: "Mes chaussures sont sales. (My shoes are dirty.)" },
                { french: "Les bottes (f. pl)", english: "Boots", phonetic: "/lay bot/", englishExample: "Des bottes pour la neige. (Boots for the snow.)" },
                { french: "Les sandales (f. pl)", english: "Sandals", phonetic: "/lay san-dal/", englishExample: "Je porte des sandales. (I wear sandals.)" },
                { french: "La ceinture", english: "Belt", phonetic: "/la san-tur/", englishExample: "J'ai besoin d'une ceinture. (I need a belt.)" },
                { french: "Le bonnet", english: "Beanie / Winter hat", phonetic: "/luh boh-nay/", englishExample: "Mets ton bonnet. (Put on your hat.)" },
                { french: "Le chapeau", english: "Hat (general)", phonetic: "/luh sha-poh/", englishExample: "Un chapeau de soleil. (A sun hat.)" },
                { french: "L'écharpe (f)", english: "Scarf", phonetic: "/lay-shahrp/", englishExample: "Une écharpe en laine. (A wool scarf.)" },
                { french: "Les gants (m. pl)", english: "Gloves", phonetic: "/lay gon/", englishExample: "Des gants pour avoir chaud. (Gloves to be warm.)" },
                { french: "Le parapluie", english: "Umbrella", phonetic: "/luh pa-ra-plwee/", englishExample: "J'ai oublié mon parapluie. (I forgot my umbrella.)" },
                { french: "Le pyjama", english: "Pyjamas", phonetic: "/luh pee-zha-ma/", englishExample: "Mon pyjama est doux. (My pyjamas are soft.)" },
                { french: "La cravate", english: "Tie", phonetic: "/la kra-vat/", englishExample: "Je porte une cravate pour le travail. (I wear a tie for work.)" },
                { french: "Le costume", english: "Suit", phonetic: "/luh kos-toom/", englishExample: "Un costume élégant. (An elegant suit.)" },
                { french: "Le foulard", english: "Scarf (light)", phonetic: "/luh foo-lar/", englishExample: "Un foulard en soie. (A silk scarf.)" },
                { french: "Les lunettes (f. pl)", english: "Glasses / Eyewear", phonetic: "/lay loo-net/", englishExample: "J'ai besoin de mes lunettes. (I need my glasses.)" },
                { french: "Les lunettes de soleil", english: "Sunglasses", phonetic: "/lay loo-net duh soh-ley/", englishExample: "Mets tes lunettes de soleil. (Put on your sunglasses.)" },
                { french: "La botte", english: "Boot (single)", phonetic: "/la bot/", englishExample: "Une botte en cuir. (A leather boot.)" },
                { french: "Le maillot", english: "Jersey / Shirt (sports)", phonetic: "/luh ma-yoh/", englishExample: "Le maillot de l'équipe. (The team's jersey.)" },
            ]},
        
            // --- ID 14: Culture & Affection (NUEVA LECCIÓN - Canada Focus / Slang / Pet Names) ---
            { id: 14, title: "Culture & Affection (CA Focus)", progressKey: "culture_affection_ca", cards: [
                // Affection & Pet Names
                { french: "Mon amour", english: "My love (m/f)", phonetic: "/mon a-moor/", englishExample: "Mon amour, tu es ma vie. (My love, you are my life.)" },
                { french: "Mon chéri", english: "My dear (male)", phonetic: "/mon shay-ree/", englishExample: "Bonne nuit, mon chéri. (Good night, my dear.)" },
                { french: "Ma chérie", english: "My dear (female)", phonetic: "/ma shay-ree/", englishExample: "Tu me manques, ma chérie. (I miss you, my dear.)" },
                { french: "Mon cœur", english: "My heart (Sweetheart, m/f)", phonetic: "/mon kur/", englishExample: "Viens ici, mon cœur. (Come here, sweetheart.)" },
                { french: "Ma puce", english: "Sweetie pie (female)", phonetic: "/ma pooss/", englishExample: "Ça va, ma puce ? (Are you okay, sweetie pie?)" },
                { french: "Un câlin", english: "A hug", phonetic: "/uh ka-lan/", englishExample: "J'ai besoin d'un câlin. (I need a hug.)" },
                { french: "Gros bisous", english: "Big kisses (affectionate)", phonetic: "/groh bee-zoo/", englishExample: "Gros bisous, à bientôt. (Big kisses, see you soon.)" },
                { french: "Je t'adore", english: "I adore you (Strong like)", phonetic: "/zhuh ta-dor/", englishExample: "Je t'adore, mon ami. (I adore you, my friend.)" },
                
                // Sports & Teams (Canada Focus)
                { french: "Le hockey", english: "Hockey", phonetic: "/luh oh-kay/", englishExample: "Le hockey est populaire au Canada. (Hockey is popular in Canada.)" },
                { french: "Le baseball", english: "Baseball", phonetic: "/luh bayz-bol/", englishExample: "J'aime le baseball. (I like baseball.)" },
                { french: "Les Blue Jays (m. pl)", english: "Blue Jays (Toronto Team)", phonetic: "/lay bloo zhay/", englishExample: "Les Blue Jays jouent bien. (The Blue Jays are playing well.)" },
                { french: "Les Maple Leafs (m. pl)", english: "Maple Leafs (Toronto Team)", phonetic: "/lay ma-pul leefs/", englishExample: "Les Maple Leafs ont gagné. (The Maple Leafs won.)" },
                { french: "Les Canadiens (m. pl)", english: "The Canadiens (Montreal Team)", phonetic: "/lay ka-na-dyañ/", englishExample: "Les Canadiens de Montréal. (The Montreal Canadiens.)" },
                
                // Cities in Canada
                { french: "Toronto", english: "Toronto", phonetic: "/to-ron-toh/", englishExample: "Toronto est très grand. (Toronto is very big.)" },
                { french: "Montréal", english: "Montreal", phonetic: "/mon-ray-al/", englishExample: "Montréal est bilingue. (Montreal is bilingual.)" },
                { french: "Vancouver", english: "Vancouver", phonetic: "/van-koo-ver/", englishExample: "Vancouver est sur la côte ouest. (Vancouver is on the west coast.)" },
                { french: "Calgary", english: "Calgary", phonetic: "/kal-ga-ree/", englishExample: "Je vais à Calgary. (I am going to Calgary.)" },
                { french: "Québec", english: "Quebec City / Province", phonetic: "/kay-bek/", englishExample: "Le Vieux-Québec est beau. (Old Quebec is beautiful.)" },
                { french: "Ottawa", english: "Ottawa", phonetic: "/o-ta-wah/", englishExample: "Ottawa est la capitale du Canada. (Ottawa is the capital of Canada.)" },
                
                // Common Quebec Expressions (Joual / Slang)
                { french: "C'est plate", english: "It's boring / It's dull", phonetic: "/say plat/", englishExample: "Le film était plate. (The movie was boring.)" },
                { french: "Chialer", english: "To complain / whine", phonetic: "/shyal-ay/", englishExample: "Arrête de chialer! (Stop complaining!)" },
                { french: "Avoir le goût de", english: "To feel like / To want to", phonetic: "/a-vwahr luh goo duh/", englishExample: "J'ai le goût de manger une poutine. (I feel like eating a poutine.)" },
                { french: "Le char", english: "The car (Quebec)", phonetic: "/luh shar/", englishExample: "Mon char est neuf. (My car is new.)" },
                { french: "La blonde", english: "The girlfriend (Quebec)", phonetic: "/la blond/", englishExample: "Ma blonde est là. (My girlfriend is here.)" },
                { french: "Le chum", english: "The boyfriend (Quebec)", phonetic: "/luh chum/", englishExample: "Mon chum est sympa. (My boyfriend is nice.)" },
                { french: "Tiguidou", english: "All good / Okay", phonetic: "/tee-gee-doo/", englishExample: "Tout est tiguidou. (Everything is all good.)" },
                
                // Other Common Phrases
                { french: "Bienvenue", english: "You're welcome / Welcome", phonetic: "/byan-vuh-noo/", englishExample: "Bienvenue chez moi. (Welcome to my home.)" },
                { french: "Pardon", english: "Excuse me / Say again", phonetic: "/par-don/", englishExample: "Pardon, je n'ai pas compris. (Excuse me, I didn't understand.)" },
                { french: "Au fait", english: "By the way", phonetic: "/oh fet/", englishExample: "Au fait, tu viens demain ? (By the way, are you coming tomorrow?)" },
                { french: "Bref", english: "In short / Anyway", phonetic: "/bref/", englishExample: "Bref, on est en retard. (Anyway, we are late.)" },
                { french: "Tant pis", english: "Too bad / Oh well", phonetic: "/tan pee/", englishExample: "J'ai manqué le bus. Tant pis! (I missed the bus. Too bad!)" },
                { french: "J'ai hâte", english: "I can't wait / I look forward", phonetic: "/zheh at/", englishExample: "J'ai hâte de te voir. (I can't wait to see you.)" },
                { french: "Félicitations", english: "Congratulations", phonetic: "/fay-lee-see-ta-syon/", englishExample: "Félicitations pour ton succès. (Congratulations on your success.)" },
                { french: "Bon courage", english: "Good luck / Hang in there", phonetic: "/bon koo-razh/", englishExample: "Bon courage pour ton examen. (Good luck with your exam.)" },
                { french: "De rien", english: "You're welcome", phonetic: "/duh ryen/", englishExample: "Merci pour l'aide. - De rien. (Thanks for the help. - You're welcome.)" },
                { french: "À la prochaine", english: "Until next time", phonetic: "/a la pro-shen/", englishExample: "Au revoir, à la prochaine. (Goodbye, until next time.)" },
            ]},
        ];
        
        const CONVERSATIONS = [
            // SCENARIOS 1-10 (Your Existing Scenarios with English added)
            { topic: "At the Café", 
              question: "Qu'est-ce que vous prendrez ?", 
              englishQuestion: "What will you have (to drink/eat)?",
              answers: [
                  { text: "Je voudrais un café, s'il vous plaît.", englishText: "I would like a coffee, please.", phonetic: "/zhuh voo-dray uh ka-fay, seel voo play/" },
                  { text: "Je vais prendre un thé vert.", englishText: "I will have a green tea.", phonetic: "/zhuh vay pron-dr uh tay ver/" }
              ]
            },
            { topic: "Asking Directions", 
              question: "Où se trouve la Tour Eiffel ?", 
              englishQuestion: "Where is the Eiffel Tower located?",
              answers: [
                  { text: "C'est tout droit, après le pont.", englishText: "It's straight ahead, after the bridge.", phonetic: "/seh too drwah, ah-pray luh pon/" },
                  { text: "Je suis désolé, je ne sais pas.", englishText: "I am sorry, I don't know.", phonetic: "/zhuh swee day-zo-lay, zhuh nuh say pah/" }
              ]
            },
            { topic: "Meeting Someone", 
              question: "Comment vous appelez-vous ?", 
              englishQuestion: "What is your name? (formal)",
              answers: [
                  { text: "Je m'appelle Thomas, et vous ?", englishText: "My name is Thomas, and you?", phonetic: "/zhuh ma-pel Toh-mah, ay voo/" },
                  { text: "Je suis Marie. Enchantée.", englishText: "I am Marie. Nice to meet you (female).", phonetic: "/zhuh swee Mah-ree. Ahn-shahn-tay/" }
              ]
            },
            { topic: "Shopping (Price)", 
              question: "Combien coûte cette écharpe ?", 
              englishQuestion: "How much does this scarf cost?",
              answers: [
                  { text: "Elle coûte vingt-cinq euros.", englishText: "It costs twenty-five euros.", phonetic: "/el koot van-sank eu-roh/" },
                  { text: "C'est trop cher, merci.", englishText: "It is too expensive, thank you.", phonetic: "/seh tro sher, mer-see/" }
              ]
            },
            { topic: "Ordering Food (Dessert)", 
              question: "Voulez-vous un dessert ?", 
              englishQuestion: "Do you want a dessert?",
              answers: [
                  { text: "Oui, je prendrai une tarte au chocolat.", englishText: "Yes, I will have a chocolate tart.", phonetic: "/wee, zhuh pron-dray oon tart oh sho-ko-lah/" },
                  { text: "Non merci, juste l'addition.", englishText: "No thank you, just the bill.", phonetic: "/non mer-see, joost la-dee-see-on/" }
              ]
            },
            { topic: "Talking About Hobbies", 
              question: "Qu'est-ce que vous aimez faire ?", 
              englishQuestion: "What do you like to do?",
              answers: [
                  { text: "J'aime lire et voyager.", englishText: "I like to read and travel.", phonetic: "/zhem leer ay vwa-ya-zhay/" },
                  { text: "Je fais du sport tous les jours.", englishText: "I do sports every day.", phonetic: "/zhuh fay doo spor too lay zhoor/" }
              ]
            },
            { topic: "Checking in (Hotel)", 
              question: "Avez-vous une réservation ?", 
              englishQuestion: "Do you have a reservation?",
              answers: [
                  { text: "Oui, au nom de Dupont.", englishText: "Yes, under the name Dupont.", phonetic: "/wee, oh nom duh Doo-pon/" },
                  { text: "Non, avez-vous une chambre libre ?", englishText: "No, do you have a free room?", phonetic: "/non, a-vay voo oon shambr leebr/" }
              ]
            },
            { topic: "Weather", 
              question: "Quel temps fait-il aujourd'hui ?", 
              englishQuestion: "What is the weather like today?",
              answers: [
                  { text: "Il fait beau et chaud.", englishText: "It is nice and warm (sunny).", phonetic: "/eel fay boh ay shoh/" },
                  { text: "Il pleut, c'est dommage.", englishText: "It is raining, that's a shame.", phonetic: "/eel pluh, seh doh-mazh/" }
              ]
            },
            { topic: "Making Plans", 
              question: "On se voit à quelle heure ?", 
              englishQuestion: "What time shall we meet?",
              answers: [
                  { text: "Rendez-vous à dix-huit heures.", englishText: "Let's meet at six PM (18:00).", phonetic: "/ron-day voo ah deez-weet ur/" },
                  { text: "Je suis occupé ce soir.", englishText: "I am busy tonight.", phonetic: "/zhuh sweez o-koo-pay su swar/" }
              ]
            },
            { topic: "At the Bakery", 
              question: "Vous désirez autre chose ?", 
              englishQuestion: "Would you like anything else?",
              answers: [
                  { text: "Non, c'est tout pour moi, merci.", englishText: "No, that's all for me, thank you.", phonetic: "/non, seh too poor mwah, mer-see/" },
                  { text: "Oui, deux croissants s'il vous plaît.", englishText: "Yes, two croissants please.", phonetic: "/wee, duh krwa-son seel voo play/" }
              ]
            },
        
            // SCENARIOS 11-20 (The 10 New Scenarios with English added)
            { topic: "Inviting a Friend (Informal)", 
              question: "Tu veux aller au cinéma ?", 
              englishQuestion: "Do you want to go to the cinema?",
              answers: [
                  { text: "Oui, bonne idée ! Quel film ?", englishText: "Yes, good idea! Which movie?", phonetic: "/wee, bun ee-day ! kel feelm/" },
                  { text: "Non, je ne peux pas, je suis fatigué.", englishText: "No, I can't, I am tired (male).", phonetic: "/non, zhuh nuh puh pah, zhuh swee fa-tee-gay/" }
              ]
            },
            { topic: "Asking for Help", 
              question: "Pouvez-vous m'aider, s'il vous plaît ?", 
              englishQuestion: "Can you help me, please? (formal)",
              answers: [
                  { text: "Bien sûr, quel est le problème ?", englishText: "Of course, what is the problem?", phonetic: "/byan sur, kel eh luh pro-blem/" },
                  { text: "Désolé, je suis pressé.", englishText: "Sorry, I'm in a hurry.", phonetic: "/day-zo-lay, zhuh swee preh-say/" }
              ]
            },
            { topic: "In the Classroom", 
              question: "Comment dit-on 'table' en français ?", 
              englishQuestion: "How do you say 'table' in French?",
              answers: [
                  { text: "On dit 'la table'.", englishText: "We say 'la table'.", phonetic: "/on dee la tabl/" },
                  { text: "Je ne me souviens plus.", englishText: "I don't remember anymore.", phonetic: "/zhuh nuh muh soo-vyan ploo/" }
              ]
            },
            { topic: "Emergency / Problem", 
              question: "Où est le médecin le plus proche ?", 
              englishQuestion: "Where is the nearest doctor?",
              answers: [
                  { text: "L'hôpital est juste à côté.", englishText: "The hospital is right next door.", phonetic: "/lo-pee-tal eh joost a koh-tay/" },
                  { text: "Il y a une pharmacie là-bas.", englishText: "There is a pharmacy over there.", phonetic: "/eel ee ah oon far-ma-see la-ba/" }
              ]
            },
            { topic: "Family Talk", 
              question: "Combien de frères et sœurs avez-vous ?", 
              englishQuestion: "How many brothers and sisters do you have?",
              answers: [
                  { text: "J'ai un frère et deux sœurs.", englishText: "I have one brother and two sisters.", phonetic: "/zheh uhn frer ay duh sur/" },
                  { text: "Je suis fils unique.", englishText: "I am an only son.", phonetic: "/zhuh swee feess oo-neek/" }
              ]
            },
            { topic: "Work/Job", 
              question: "Quel est votre métier ?", 
              englishQuestion: "What is your profession?",
              answers: [
                  { text: "Je suis ingénieur.", englishText: "I am an engineer (male).", phonetic: "/zhuh sweez an-zhay-nyur/" },
                  { text: "Je suis au chômage pour l'instant.", englishText: "I am unemployed for now.", phonetic: "/zhuh sweez oh sho-mazh poor lan-stan/" }
              ]
            },
            { topic: "Asking for an Opinion", 
              question: "Que pensez-vous de ce film ?", 
              englishQuestion: "What do you think of this movie?",
              answers: [
                  { text: "J'ai trouvé ça très intéressant.", englishText: "I found that very interesting.", phonetic: "/zheh troo-vay sa tray an-tay-reh-san/" },
                  { text: "Je n'ai pas aimé du tout.", englishText: "I didn't like it at all.", phonetic: "/zhuh neh pah zay-may doo too/" }
              ]
            },
            { topic: "Buying a Ticket (Travel)", 
              question: "Un aller simple ou un aller-retour ?", 
              englishQuestion: "A one-way trip or a round trip?",
              answers: [
                  { text: "Un aller-retour, s'il vous plaît.", englishText: "A round trip, please.", phonetic: "/uhn a-lay ruh-toor, seel voo play/" },
                  { text: "Un aller simple, pour demain.", englishText: "A one-way trip, for tomorrow.", phonetic: "/uhn a-lay sanpl, poor duh-man/" }
              ]
            },
            { topic: "Apologizing", 
              question: "Excusez-moi, je suis en retard.", 
              englishQuestion: "Excuse me, I am late.",
              answers: [
                  { text: "Ce n'est pas grave, entrez.", englishText: "It's not serious, come in.", phonetic: "/su neh pah grav, an-tray/" },
                  { text: "Ce n'est pas un problème.", englishText: "It is not a problem.", phonetic: "/su neh pah zuhn pro-blem/" }
              ]
            },
            { topic: "Telling Time", 
              question: "Il est quelle heure maintenant ?", 
              englishQuestion: "What time is it now?",
              answers: [
                  { text: "Il est midi et quart.", englishText: "It is a quarter past noon (12:15 PM).", phonetic: "/eel eh mee-dee ay kar/" },
                  { text: "Il est cinq heures moins le quart.", englishText: "It is a quarter to five (4:45 PM).", phonetic: "/eel eh sank ur mwan luh kar/" }
              ]
            },
        ];
        
        // Initialize active card list with the first lesson's cards
        if (LESSONS.length > 0) {
            window.activeCardList = LESSONS[0].cards;
        }

        // --- UI UTILITY FUNCTIONS ---
        window.showNotification = (message, type = 'info') => {
            const box = document.getElementById('notification-box');
            let colorClass = 'bg-indigo-500';
            if (type === 'success') colorClass = 'bg-green-500';
            if (type === 'error') colorClass = 'bg-red-500';

            box.innerHTML = `<div class="p-3 text-white rounded-xl shadow-lg font-bold text-center ${colorClass}">${message}</div>`;
            box.style.opacity = 1;
            box.style.position = 'fixed';
            box.style.top = '1rem';
            box.style.left = '50%';
            box.style.transform = 'translateX(-50%)';
            box.style.zIndex = '1000';

            setTimeout(() => {
                box.style.opacity = 0;
            }, 3000);
        };

        // --- NAVIGATION AND MODE CONTROLS ---

        window.changeView = (newView) => {
            window.currentView = newView;
            
            // Set the appropriate mode when switching views
            if (newView === 'flashcard') {
                window.currentMode = 'practice';
                // Reset to the beginning of the active lesson
                window.activeCardList = LESSONS[window.currentLessonIndex].cards;
                window.currentCardIndex = 0;
            } else if (newView === 'conversations') {
                window.currentMode = 'conversations';
                window.currentConversationIndex = 0;
            } else if (newView === 'wordGuess') {
                window.currentMode = 'guess';
                window.guessWordState.score = 0;
                window.startNewWordGuessGame();
            }
            
            window.isFlipped = false;
            renderApp();
        };

        window.startSpeedReview = () => {
            const completedKeys = Object.keys(window.currentProgress).filter(key => window.currentProgress[key] === true);
            
            if (completedKeys.length === 0) {
                window.showNotification("Complete at least one lesson before starting a review!", 'info');
                return;
            }

            let reviewCards = [];
            completedKeys.forEach(key => {
                const lesson = LESSONS.find(l => l.progressKey === key);
                if (lesson) {
                    reviewCards = reviewCards.concat(lesson.cards);
                }
            });

            // Randomize and set state
            window.activeCardList = reviewCards.sort(() => Math.random() - 0.5);
            window.currentMode = 'review';
            window.currentCardIndex = 0;
            window.isFlipped = false;

            renderApp();
        };

        window.selectLesson = (index) => {
            window.currentLessonIndex = index;
            window.activeCardList = LESSONS[index].cards;
            window.currentCardIndex = 0;
            window.isFlipped = false;
            renderApp();
        };

        window.flipCard = () => {
            window.isFlipped = !window.isFlipped;
            document.getElementById('flip-container').classList.toggle('flipped', window.isFlipped);
        };

        window.prevCard = () => {
            if (window.currentCardIndex > 0) {
                window.currentCardIndex--;
                window.isFlipped = false;
                renderApp();
            }
        };

        window.nextCard = async () => {
            const totalCards = window.activeCardList.length;
            const isLastCard = window.currentCardIndex === totalCards - 1;

            if (isLastCard) {
                // If in Practice mode, mark lesson complete
                if (window.currentMode === 'practice') {
                    const lessonKey = LESSONS[window.currentLessonIndex].progressKey;
                    window.currentProgress[lessonKey] = true;
                    await window.saveProgress();
                    window.showNotification(`Lesson '${LESSONS[window.currentLessonIndex].title}' completed!`, 'success');
                    
                    // Move to next lesson or loop
                    const nextIndex = (window.currentLessonIndex + 1) % LESSONS.length;
                    window.selectLesson(nextIndex);

                } else if (window.currentMode === 'review') {
                    // End review mode
                    window.showNotification("Speed Review finished!", 'success');
                    window.changeView('flashcard'); // Go back to practice view
                }

            } else {
                // Move to next card
                window.currentCardIndex++;
                window.isFlipped = false;
                renderApp();
            }
        };

        window.prevConversation = () => {
            if (window.currentConversationIndex > 0) {
                window.currentConversationIndex--;
                renderApp();
            }
        };

        window.nextConversation = () => {
            const totalConvs = CONVERSATIONS.length;
            window.currentConversationIndex = (window.currentConversationIndex + 1) % totalConvs;
            renderApp();
        };


        // --- TTS & Recording FUNCTIONS (STUBS) ---

        const BASE_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/';
        const API_KEY = ""; // Canvas will inject this

        // Helper function to convert base64 to ArrayBuffer
        const base64ToArrayBuffer = (base64) => {
            const binaryString = atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes.buffer;
        };

        // Helper function to convert PCM data to WAV Blob
        const pcmToWav = (pcmData, sampleRate) => {
            const numChannels = 1;
            const bytesPerSample = 2; // 16-bit PCM

            const buffer = new ArrayBuffer(44 + pcmData.length * bytesPerSample);
            const view = new DataView(buffer);
            let offset = 0;

            // Write RIFF header
            view.setUint32(offset, 0x46464952, false); offset += 4; // "RIFF"
            view.setUint32(offset, 36 + pcmData.length * bytesPerSample, true); offset += 4; // file size
            view.setUint32(offset, 0x45564157, false); offset += 4; // "WAVE"

            // Write FMT chunk
            view.setUint32(offset, 0x20746d66, false); offset += 4; // "fmt "
            view.setUint32(offset, 16, true); offset += 4; // chunk size
            view.setUint16(offset, 1, true); offset += 2; // audio format (1 = PCM)
            view.setUint16(offset, numChannels, true); offset += 2; // number of channels
            view.setUint32(offset, sampleRate, true); offset += 4; // sample rate
            view.setUint32(offset, sampleRate * numChannels * bytesPerSample, true); offset += 4; // byte rate
            view.setUint16(offset, numChannels * bytesPerSample, true); offset += 2; // block align
            view.setUint16(offset, bytesPerSample * 8, true); offset += 2; // bits per sample

            // Write DATA chunk
            view.setUint32(offset, 0x61746164, false); offset += 4; // "data"
            view.setUint32(offset, pcmData.length * bytesPerSample, true); offset += 4; // data size

            // Write PCM data
            for (let i = 0; i < pcmData.length; i++) {
                view.setInt16(offset, pcmData[i], true);
                offset += 2;
            }

            return new Blob([buffer], { type: 'audio/wav' });
        };

        window.handleListenClick = async (text) => {
            if (window.isListening) return; // Prevent simultaneous calls

            window.isListening = true;
            window.showNotification("Generating audio...", 'info');
            
            const model = "gemini-2.5-flash-preview-tts";
            const voiceName = "Kore"; // Example voice
            const listenButtonId = window.currentView === 'conversations' ? '#listen-button-q, #listen-button-a1, #listen-button-a2' : '.listen-btn';
            
            document.querySelectorAll(listenButtonId).forEach(btn => btn.disabled = true);

            const payload = {
                contents: [{ parts: [{ text: text }] }],
                generationConfig: {
                    responseModalities: ["AUDIO"],
                    speechConfig: {
                        voiceConfig: {
                            prebuiltVoiceConfig: { voiceName: voiceName }
                        }
                    }
                },
            };

            const url = `${BASE_API_URL}${model}:generateContent?key=${API_KEY}`;
            let response, result;

            try {
                // Simple retry loop (exponential backoff)
                for (let i = 0; i < 3; i++) {
                    response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) break;
                    if (i < 2) await new Promise(resolve => setTimeout(resolve, 1000 * Math.pow(2, i))); // Wait 1s, 2s
                    else throw new Error("API request failed after retries.");
                }

                if (!response || !response.ok) throw new Error(`HTTP error! status: ${response ? response.status : 'unknown'}`);
                
                result = await response.json();
                const part = result?.candidates?.[0]?.content?.parts?.[0];
                const audioData = part?.inlineData?.data;
                const mimeType = part?.inlineData?.mimeType;

                if (audioData && mimeType && mimeType.startsWith("audio/L16")) {
                    const sampleRateMatch = mimeType.match(/rate=(\d+)/);
                    if (!sampleRateMatch) throw new Error("Could not parse sample rate from MIME type.");
                    const sampleRate = parseInt(sampleRateMatch[1], 10);
                    
                    const pcmData = base64ToArrayBuffer(audioData);
                    const pcm16 = new Int16Array(pcmData);
                    const wavBlob = pcmToWav(pcm16, sampleRate);
                    const audioUrl = URL.createObjectURL(wavBlob);

                    const audio = new Audio(audioUrl);
                    audio.play();
                    audio.onended = () => {
                        window.isListening = false;
                        document.querySelectorAll(listenButtonId).forEach(btn => btn.disabled = false);
                        window.showNotification("Audio finished.", 'success');
                    };
                    window.showNotification("Playing audio...", 'success');

                } else {
                    throw new Error("Invalid or missing audio data in response.");
                }

            } catch (error) {
                console.error("TTS Error:", error);
                window.showNotification("Error generating audio.", 'error');
                window.isListening = false;
                document.querySelectorAll(listenButtonId).forEach(btn => btn.disabled = false);
            }
        };

        window.toggleRecording = async () => {
            const recordButtonId = window.currentView === 'conversations' ? 'record-btn' : 'record-btn-flashcard';
            const playButtonId = window.currentView === 'conversations' ? 'play-btn' : 'play-btn-flashcard';
            const recordBtn = document.getElementById(recordButtonId);
            const playBtn = document.getElementById(playButtonId);
            
            if (window.isRecording) {
                // STOP recording
                window.mediaRecorder.stop();
                window.isRecording = false;
                recordBtn.textContent = 'Start Recording';
                recordBtn.classList.remove('recording');
                window.showNotification('Recording finished.', 'success');
            } else {
                // START recording
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    window.mediaRecorder = new MediaRecorder(stream);
                    window.audioChunks = [];

                    window.mediaRecorder.ondataavailable = event => {
                        window.audioChunks.push(event.data);
                    };

                    window.mediaRecorder.onstop = () => {
                        const audioBlob = new Blob(window.audioChunks, { type: 'audio/webm' });
                        window.recordedAudioUrl = URL.createObjectURL(audioBlob);
                        playBtn.disabled = false;
                        recordBtn.disabled = false;
                    };

                    window.mediaRecorder.start();
                    window.isRecording = true;
                    recordBtn.textContent = 'Stop Recording';
                    recordBtn.classList.add('recording');
                    playBtn.disabled = true;
                    window.showNotification('Recording started (max 5s)...', 'info');
                    
                    // Stop after 5 seconds automatically
                    setTimeout(() => {
                        if (window.isRecording) window.toggleRecording();
                    }, 5000);

                } catch (err) {
                    console.error('Recording error:', err);
                    window.showNotification('Microphone access denied or failed.', 'error');
                }
            }
        };

        window.playRecording = () => {
            if (window.recordedAudioUrl) {
                const audio = new Audio(window.recordedAudioUrl);
                audio.play();
                window.showNotification('Playing back your recording.', 'info');
            } else {
                window.showNotification('No recording found.', 'error');
            }
        };


        // --- MAIN RENDER FUNCTION (UPDATED) ---

        /**
         * Renders the entire application based on the current view (Flashcard, Conversation, Guess Word)
         * This function addresses all layout and visibility requests.
         */
        window.renderApp = () => {
            document.getElementById('loading-state').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';

            // View/Mode Definitions
            const isFlashcard = window.currentView === 'flashcard';
            const isConversation = window.currentView === 'conversations';
            const isWordGuess = window.currentView === 'wordGuess';

            // Get all relevant containers
            const flashcardContainer = document.getElementById('flashcard-container');
            const conversationContainer = document.getElementById('conversation-container');
            const wordGuessContainer = document.getElementById('word-guess-container');
            const modeStatusBar = document.getElementById('mode-status-bar');

            // 1. Set Container Visibility (Show only one main view)
            flashcardContainer.style.display = isFlashcard ? 'block' : 'none';
            conversationContainer.style.display = isConversation ? 'block' : 'none';
            wordGuessContainer.style.display = isWordGuess ? 'block' : 'none';

            // 2. Control Mode/Status Bar Visibility (Fix 1: Hide for Guess Word)
            // This hides the entire bar containing "Current Mode" and the "Speed Review" button.
            if (modeStatusBar) {
                modeStatusBar.style.display = (isFlashcard || isConversation) ? 'flex' : 'none';
            }

            // 3. Set Lesson Nav Visibility (Fix 2: Show only for Flashcards in Practice mode)
            document.getElementById('lesson-nav-container').style.display = 
                (window.currentMode === 'practice' && isFlashcard) ? 'block' : 'none';
            

            // 4. Set Mode Text and Review Button Visibility
            let modeText = '';
            let showReviewBtn = false;
            
            if (isFlashcard) {
                modeText = window.currentMode === 'review' ? 'Speed Review' : 'Practice';
                showReviewBtn = (window.currentMode === 'practice');
            } else if (isConversation) {
                modeText = 'Conversations';
            } else if (isWordGuess) {
                // Fix 3: Set display text for the new mode (This only happens if the status bar is visible, 
                // but we handle the view internally for games)
                modeText = 'Guess Word'; 
            }
            document.getElementById('current-mode-display').textContent = modeText;
            document.getElementById('btn-start-review').style.display = showReviewBtn ? 'block' : 'none';


            // 5. Render Content
            if (isFlashcard) {
                renderFlashcardView();
            } else if (isConversation) {
                renderConversationPractice();
            } else if (isWordGuess) {
                renderWordGuessView(); // Call the new game renderer
            }
        };

        // --- VIEW RENDERERS ---

        window.renderFlashcardView = () => {
            const list = window.activeCardList;
            const card = list[window.currentCardIndex];
            const isReviewMode = window.currentMode === 'review';
            const flashcardContainer = document.getElementById('flashcard-container');
            const navContainer = document.getElementById('lesson-nav');
        
            flashcardContainer.classList.remove('hidden');
        
            // 1. Render Lesson Navigation (Fix 2: This block is now guaranteed to run if mode === 'practice')
            if (window.currentMode === 'practice') {
                navContainer.innerHTML = LESSONS.map((l, index) => {
                    const isActive = index === window.currentLessonIndex;
                    const isDone = window.currentProgress[l.progressKey];
                    return `
                        <button onclick="selectLesson(${index})"
                            class="p-3 text-sm font-medium rounded-xl transition duration-150 ease-in-out flex items-center justify-center
                            ${isActive ? 'bg-indigo-600 text-white shadow-md' : 'bg-white text-gray-700 hover:bg-indigo-50 hover:text-indigo-600'}
                            ${isDone && !isActive ? 'border-2 border-green-500 text-green-700' : 'border border-gray-200'}
                            ">
                            ${l.title}
                            ${isDone ? '<span class="ml-2">✅</span>' : ''}
                        </button>
                    `;
                }).join('');
            }
        
            // --- Lógica para el AUDIO: Lee SOLO la parte principal (card.french) ---
            const audioText = card.french.split('(')[0].trim();
            // ----------------------------------------
        
            // 2. Render Card Container and Details
            const cardContainer = document.getElementById('card-container');
            const cardDetail = document.getElementById('card-detail');
            
            // RENDER THE MAIN CARD CONTENT FIRST
            cardContainer.innerHTML = `
                <div id="flip-container" class="flipper h-80 w-full" onclick="flipCard()">
                    <div class="front">
                        <div class="text-center">
                            <p class="text-2xl font-semibold mb-2 text-gray-500">French</p>
                            <h2 class="text-5xl font-extrabold">${card.french}</h2>
                            <p class="text-2xl font-semibold mb-2 phonetic">${card.phonetic}</p>
                            
                            ${card.verbContext ? `<p class="text-xl font-bold text-indigo-500 mb-6">${card.verbContext}</p>` : '<p class="mb-6 h-7"></p>'}
        
                            <button id="listen-button-main" onclick="event.stopPropagation(); handleListenClick('${audioText.replace(/'/g, "\\'")}')" 
                                class="listen-btn mt-6 flex items-center justify-center mx-auto text-lg hover:shadow-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-volume-2 w-5 h-5 mr-2">
                                    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/>
                                    <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                                </svg>
                                Listen
                            </button>
                            <p class="mt-4 text-sm text-gray-400">Click card to reveal English!</p>
                            ${isReviewMode ? `<p class="mt-2 text-xs text-indigo-400">From: ${card.lessonTitle}</p>` : ''}
                        </div>
                    </div>
                    <div class="back">
                        <div class="text-center">
                            <p class="text-2xl font-semibold mb-2 text-indigo-200">English Translation</p>
                            <h2 class="text-4xl font-extrabold">${card.english}</h2>
                            
                            ${card.englishExample ? `<p class="mt-4 text-xl font-medium text-indigo-300">${card.englishExample}</p>` : ''}
        
                            ${isReviewMode ? `<p class="mt-4 text-sm text-indigo-200">${card.lessonTitle}</p>` : ''}
                        </div>
                    </div>
                </div>
            `;
            if (window.isFlipped) {
                document.getElementById('flip-container').classList.add('flipped');
            }
        
            // --------------------------------------------------------------------------------
            // Render the Recording Controls
            // --------------------------------------------------------------------------------
            const recordingControls = document.getElementById('flashcard-recording-controls');
            if (recordingControls) {
                recordingControls.innerHTML = `
                    <div class="flex justify-center space-x-4 p-4 bg-indigo-100 rounded-2xl shadow-inner my-6">
                        <button id="record-btn-flashcard" onclick="toggleRecording()" class="action-btn flex items-center text-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>
                            Start Recording
                        </button>
                        <button id="play-btn-flashcard" onclick="playRecording()" disabled class="action-btn flex items-center text-sm bg-gray-500 hover:bg-gray-600 disabled:bg-gray-400 disabled:cursor-not-allowed" style="box-shadow: 0 4px #4b5563;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                            Play My Recording
                        </button>
                    </div>
                `;
            }
            // --------------------------------------------------------------------------------
        
            // 3. Render Card Details and Navigation
            const totalCards = list.length;
            const currentCardNumber = window.currentCardIndex + 1;
            
            let detailText = `Card: ${currentCardNumber} of ${totalCards}`;
            if (!isReviewMode) {
                const lesson = LESSONS[window.currentLessonIndex];
                const isCompleted = window.currentProgress[lesson.progressKey];
                detailText = `Lesson: <span class="font-semibold">${lesson.title}</span> | ${detailText} ${isCompleted ? ' (COMPLETED)' : ''}`;
            } else {
                 detailText = `Mode: <span class="font-semibold">Speed Review</span> | ${detailText}`;
            }
        
            cardDetail.innerHTML = `<p class="text-sm text-gray-500 mt-4">${detailText}</p>`;
        
            const btnPrev = document.getElementById('btn-prev');
            const btnNext = document.getElementById('btn-next');
            const isLastCard = window.currentCardIndex === totalCards - 1;
        
            btnPrev.disabled = window.currentCardIndex === 0;
            btnPrev.onclick = prevCard;
            btnNext.onclick = nextCard;
            
            if (isLastCard) {
                btnNext.textContent = isReviewMode ? "Finish Review" : "Mark Complete & Next Lesson";
                btnNext.className = `p-3 rounded-xl font-semibold transition duration-150 bg-green-600 text-white hover:bg-green-700`;
            } else {
                btnNext.textContent = "Next Card";
                btnNext.className = `p-3 rounded-xl font-semibold transition duration-150 bg-indigo-600 text-white hover:bg-indigo-700`;
            }
            btnPrev.className = `p-3 rounded-xl font-semibold transition duration-150 ${window.currentCardIndex === 0 ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-gray-300 text-gray-700 hover:bg-gray-400'}`;
        };
        
        window.renderConversationPractice = () => {
            const currentConv = CONVERSATIONS[window.currentConversationIndex];
            const convContainer = document.getElementById('conversation-container');
            const totalConvs = CONVERSATIONS.length;
            
            convContainer.classList.remove('hidden');
        
            // Main Conversation Card
            convContainer.innerHTML = `
                <div class="bg-white rounded-3xl shadow-2xl p-6 mb-6">
                    <div class="text-center pb-4 border-b border-gray-100">
                        <p class="text-xl font-bold text-indigo-600">Topic: ${currentConv.topic}</p>
                        <p class="text-sm text-gray-500">Scenario ${window.currentConversationIndex + 1} of ${totalConvs}</p>
                    </div>
        
                    <div class="mt-6 p-4 bg-indigo-50 rounded-xl border border-indigo-200 shadow-inner">
                        <p class="text-sm font-semibold text-indigo-700 mb-2">Question:</p>
                        <h3 class="text-3xl font-extrabold text-indigo-900 mb-2">${currentConv.question}</h3>
                        
                        <p class="text-xl italic text-indigo-700 font-medium mb-3">${currentConv.englishQuestion}</p>
                        
                        <p class="text-lg font-semibold phonetic">${currentConv.answers[0].phonetic.split('/').slice(0, 2).join('/').replace(',', '')}...</p>
                        <button id="listen-button-q" onclick="handleListenClick('${currentConv.question.replace(/'/g, "\\'")}')" 
                            class="listen-btn mt-3 flex items-center justify-center text-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
                            Listen Question
                        </button>
                    </div>
        
                    <h4 class="text-xl font-bold text-gray-700 mt-8 mb-4">Choose and Practice Your Answer:</h4>
                    
                    <div class="p-4 bg-white rounded-xl border border-gray-300 shadow-lg mb-4">
                        <p class="text-2xl font-medium text-gray-800">${currentConv.answers[0].text}</p>
                        
                        <p class="text-base italic text-gray-500 mb-2">${currentConv.answers[0].englishText}</p>
                        
                        <p class="text-sm font-semibold phonetic mb-3">${currentConv.answers[0].phonetic}</p>
                        <button id="listen-button-a1" onclick="handleListenClick('${currentConv.answers[0].text.replace(/'/g, "\\'")}')" 
                            class="listen-btn flex items-center justify-center text-sm px-3 py-1">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
                            Listen Sample
                        </button>
                    </div>
        
                    <div class="p-4 bg-white rounded-xl border border-gray-300 shadow-lg">
                        <p class="text-2xl font-medium text-gray-800">${currentConv.answers[1].text}</p>
                        
                        <p class="text-base italic text-gray-500 mb-2">${currentConv.answers[1].englishText}</p>
                        
                        <p class="text-sm font-semibold phonetic mb-3">${currentConv.answers[1].phonetic}</p>
                        <button id="listen-button-a2" onclick="handleListenClick('${currentConv.answers[1].text.replace(/'/g, "\\'")}')" 
                            class="listen-btn flex items-center justify-center text-sm px-3 py-1">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
                            Listen Sample
                        </button>
                    </div>
                </div>
        
                <div class="flex justify-center space-x-4 p-4 bg-indigo-100 rounded-2xl shadow-inner">
                    <button id="record-btn" onclick="toggleRecording()" class="action-btn flex items-center text-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>
                        Start Recording
                    </button>
                    <button id="play-btn" onclick="playRecording()" disabled class="action-btn flex items-center text-sm bg-gray-500 hover:bg-gray-600 disabled:bg-gray-400 disabled:cursor-not-allowed" style="box-shadow: 0 4px #4b5563;">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                        Play My Recording
                    </button>
                </div>
        
                <div class="flex justify-between items-center mt-6">
                    <button onclick="prevConversation()" class="p-3 rounded-xl font-semibold transition duration-150 bg-gray-300 text-gray-700 hover:bg-gray-400 ${window.currentConversationIndex === 0 ? 'opacity-50 cursor-not-allowed' : ''}" ${window.currentConversationIndex === 0 ? 'disabled' : ''}>
                        < Previous Topic
                    </button>
                    <button onclick="nextConversation()" class="p-3 rounded-xl font-semibold transition duration-150 bg-indigo-600 text-white hover:bg-indigo-700">
                        Next Topic >
                    </button>
                </div>
            `;
        };

        // --- NEW GAME RENDERER (Stub for Guess Word Mode) ---
        window.renderWordGuessView = () => {
            const container = document.getElementById('word-guess-container');
            const score = window.guessWordState.score;
            const scrambled = window.guessWordState.scrambledWord;
            const message = window.guessWordState.message;

            container.innerHTML = `
                <div class="bg-white rounded-3xl shadow-2xl p-6 mb-6">
                    <h2 class="text-3xl font-extrabold text-pink-600 mb-2 text-center">Guess the Word!</h2>
                    <p class="text-xl text-gray-600 mb-6 text-center">Score: <span class="font-bold">${score}</span></p>

                    <div class="text-center p-8 bg-pink-50 rounded-xl border-4 border-pink-200">
                        <p class="text-sm font-medium text-pink-700 mb-2">Unscramble the French word:</p>
                        <h3 class="text-6xl font-black tracking-widest text-pink-900 uppercase select-none">${scrambled}</h3>
                    </div>

                    <div class="mt-8">
                        <input id="user-guess-input" type="text" placeholder="Type your guess here (in French)"
                            class="w-full p-4 text-center text-xl border-2 border-gray-300 rounded-xl focus:border-pink-500 focus:ring focus:ring-pink-200 transition"
                            value="${window.guessWordState.userGuess}"
                            oninput="window.guessWordState.userGuess = this.value"
                            onkeydown="if(event.key === 'Enter') checkGuess()">
                        
                        <button onclick="window.checkGuess()" class="action-btn w-full mt-4 bg-pink-600 hover:bg-pink-700" style="box-shadow: 0 4px #c026d3;">
                            Check Guess
                        </button>
                    </div>
                    
                    <p id="guess-message" class="text-center mt-4 text-lg font-semibold ${message.includes('Correct') ? 'text-green-600' : 'text-red-600'}">${message}</p>
                </div>
            `;
            document.getElementById('user-guess-input').focus();
        };

        window.startNewWordGuessGame = () => {
            const allCards = LESSONS.flatMap(l => l.cards);
            const randomCard = allCards[Math.floor(Math.random() * allCards.length)];
            const word = randomCard.french.toLowerCase().replace(/[^a-z]/g, ''); // Use base word
            
            // Function to scramble a string
            const scramble = (str) => {
                const arr = str.split('');
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
                return arr.join('');
            };

            window.guessWordState.currentWord = word;
            window.guessWordState.scrambledWord = scramble(word);
            window.guessWordState.userGuess = '';
            window.guessWordState.message = '';
            renderWordGuessView();
        };

        window.checkGuess = () => {
            const correctWord = window.guessWordState.currentWord;
            const userGuess = window.guessWordState.userGuess.toLowerCase().replace(/[^a-z]/g, '');

            if (userGuess === correctWord) {
                window.guessWordState.score += 1;
                window.guessWordState.message = `🎉 Correct! The word was '${correctWord}'. Starting next round...`;
                window.showNotification('Correct!', 'success');
                setTimeout(window.startNewWordGuessGame, 1500);
            } else {
                window.guessWordState.score = Math.max(0, window.guessWordState.score - 1);
                window.guessWordState.message = `❌ Incorrect. Try again! (Hint: It relates to '${LESSONS.flatMap(l => l.cards).find(c => c.french.toLowerCase().replace(/[^a-z]/g, '') === correctWord)?.english}')`;
                window.showNotification('Incorrect. Try again!', 'error');
            }
            renderWordGuessView();
        };

        // --- INIT ---
        window.onload = () => {
            initFirebase();
            // Start the game for the first time
            window.startNewWordGuessGame();
        };
    </script>
</head>
<body class="min-h-screen p-4 sm:p-8">

    <div id="notification-box" style="opacity: 0; transition: opacity 0.3s;"></div>

    <header class="max-w-xl mx-auto mb-8">
        <h1 class="text-4xl font-extrabold text-indigo-700">🇫🇷 French Companion</h1>
        <p id="user-id-display" class="text-sm text-gray-500 mt-1">Initializing...</p>
        <div class="flex flex-wrap space-x-3 mt-4">
            <button onclick="changeView('flashcard')" class="px-4 py-2 text-sm font-bold rounded-xl transition duration-150 shadow-md"
                style="background-color: var(--color-practice); color: var(--color-practice-text);"
                :class="{'bg-indigo-600 text-white': currentView === 'flashcard', 'bg-white text-gray-700 border border-gray-300': currentView !== 'flashcard'}">
                Flashcards
            </button>
            <button onclick="changeView('conversations')" class="px-4 py-2 text-sm font-bold rounded-xl transition duration-150 shadow-md"
                style="background-color: var(--color-conversations); color: var(--color-conversations-text);"
                :class="{'bg-green-600 text-white': currentView === 'conversations', 'bg-white text-gray-700 border border-gray-300': currentView !== 'conversations'}">
                Conversations
            </button>
            <!-- New button for the Guess Word Game -->
            <button onclick="changeView('wordGuess')" class="px-4 py-2 text-sm font-bold rounded-xl transition duration-150 shadow-md bg-pink-500 text-white hover:bg-pink-600 mt-2 sm:mt-0">
                Word Game
            </button>
        </div>
    </header>

    <!-- Loading State -->
    <div id="loading-state" class="max-w-xl mx-auto text-center mt-20 p-8 bg-white rounded-2xl shadow-xl">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500 mx-auto"></div>
        <p id="loading-message" class="mt-4 text-indigo-700 font-semibold">Loading lessons and tracking progress...</p>
    </div>

    <!-- Main Content (Hidden until initialized) -->
    <main id="main-content" class="max-w-xl mx-auto" style="display: none;">

        <!-- Mode Selector / Status Bar (Fixed Position for Flashcard/Conversations) -->
        <!-- Fix 1: Added ID `mode-status-bar` for controlled visibility in JS -->
        <div id="mode-status-bar" class="flex flex-col sm:flex-row justify-between items-center mb-6 p-4 bg-indigo-50 rounded-2xl shadow-inner">
            <h2 class="text-lg font-semibold text-indigo-700 mb-2 sm:mb-0">Current Mode: <span id="current-mode-display" class="capitalize font-extrabold text-indigo-900">Practice</span></h2>
            <!-- Start Speed Review Button (Visibility controlled in renderApp) -->
            <button id="btn-start-review" onclick="startSpeedReview()" class="px-4 py-2 w-full sm:w-auto text-sm font-bold bg-pink-600 text-white rounded-xl hover:bg-pink-700 transition duration-150 shadow-lg">
                🚀 Start Speed Review
            </button>
        </div>

        <!-- Word Guess Game View (Fix 3: New Container) -->
        <div id="word-guess-container" class="hidden">
            <!-- Content rendered by renderWordGuessView() -->
        </div>

        <!-- Conversation Practice View -->
        <div id="conversation-container" class="hidden">
            <!-- Content rendered by renderConversationPractice() -->
        </div>
        
        <!-- Flashcard View -->
        <div id="flashcard-container">
            <!-- Lesson Navigation (Fix 2: Shows the Animal/Colors list in Practice mode) -->
            <div id="lesson-nav-container">
                <nav id="lesson-nav" class="flex flex-wrap gap-3 mb-6 p-4 bg-white rounded-2xl shadow-md"></nav>
            </div>

            <!-- Flashcard Area -->
            <section class="bg-white rounded-3xl shadow-2xl overflow-hidden p-6 mb-6 lesson-card">
                <div id="card-container" class="relative h-80">
                    <!-- Card content will be rendered here -->
                </div>
            </section>

            <!-- Flashcard Recording Controls (Microphone) -->
            <div id="flashcard-recording-controls">
            </div>

            <!-- Card Details and Navigation -->
            <div class="flex flex-col sm:flex-row justify-between items-center p-4 bg-white rounded-2xl shadow-md">
                <div id="card-detail" class="mb-4 sm:mb-0">
                    <!-- Card details will be rendered here -->
                </div>
                <div class="flex space-x-3 w-full sm:w-auto">
                    <button id="btn-prev" onclick="prevCard()" class="flex-1 p-3 rounded-xl font-semibold transition duration-150">
                        < Back
                    </button>
                    <button id="btn-next" onclick="nextCard()" class="flex-1 p-3 rounded-xl font-semibold transition duration-150">
                        Next Card
                    </button>
                </div>
            </div>
        </div>

        <footer class="mt-8 text-center text-gray-400 text-xs">
            Progress is automatically saved to your user ID using Google Firestore.
        </footer>

    </main>

</body>
</html>
